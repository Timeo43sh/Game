<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcade Hub - Mini Jeux</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #FF2D75;
            --secondary: #2B2B36;
            --dark: #1A1A23;
            --light: #F0F0F0;
            --accent: #00D1FF;
            --success: #4CAF50;
            --warning: #FFC107;
            --danger: #F44336;
            --card-bg: #242430;
            --text: #FFFFFF;
            --text-secondary: #B0B0B0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--dark);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--secondary);
        }

        .logo {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .game-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }

        .game-card-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .game-card-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .game-card:hover .game-card-overlay {
            opacity: 1;
        }

        .play-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: transform 0.2s ease;
        }

        .play-button:hover {
            transform: scale(1.05);
        }

        .game-card-content {
            padding: 20px;
        }

        .game-card-title {
            font-size: 1.4rem;
            margin-bottom: 10px;
            color: var(--accent);
        }

        .game-card-description {
            color: var(--text-secondary);
            margin-bottom: 15px;
            font-size: 0.95rem;
        }

        .game-card-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .game-card-tag {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 8px;
            margin-bottom: 8px;
        }

        .tag-action {
            background: var(--primary);
            color: white;
        }

        .tag-puzzle {
            background: var(--accent);
            color: var(--dark);
        }

        .tag-idle {
            background: var(--warning);
            color: var(--dark);
        }

        .game-view {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--dark);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--secondary);
        }

        .game-title {
            font-size: 1.8rem;
            color: var(--accent);
        }

        .back-button {
            background: var(--secondary);
            color: var(--text);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .game-container {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        /* Styles sp√©cifiques pour Click Color */
        #click-color-game {
            text-align: center;
        }

        #color-display {
            width: 250px;
            height: 250px;
            margin: 0 auto 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: transform 0.2s;
        }

        #color-display:active {
            transform: scale(0.98);
        }

        #color-value {
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-family: monospace;
            background: var(--secondary);
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
        }

        #click-counter {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--accent);
        }

        .color-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: var(--secondary);
            padding: 10px 15px;
            border-radius: 8px;
            min-width: 100px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .color-controls {
            margin-top: 20px;
        }

        .color-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin: 0 5px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .color-button:hover {
            background: #ff1a6b;
        }

        /* Styles pour Tetris */
        #tetris-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        #tetris-board {
            border: 3px solid var(--secondary);
            background: var(--dark);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            border-radius: 8px;
        }

        #tetris-side-panel {
            display: flex;
            flex-direction: column;
            gap: 25px;
            width: 200px;
        }

        .tetris-panel {
            background: var(--secondary);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .tetris-panel-title {
            font-size: 1.3rem;
            color: var(--accent);
            margin-bottom: 15px;
            text-align: center;
            font-weight: 600;
        }

        #next-piece-container {
            width: 160px;
            height: 160px;
            margin: 0 auto;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }

        #next-piece {
            position: relative;
            width: 120px;
            height: 120px;
        }

        #tetris-score-display {
            font-size: 2rem;
            text-align: center;
            margin: 15px 0;
            color: var(--light);
            font-weight: 700;
        }

        #tetris-level-display {
            font-size: 1.2rem;
            text-align: center;
            color: var(--accent);
        }

        .tetris-btn {
            background: var(--primary);
            border: none;
            color: white;
            padding: 12px 24px;
            font-size: 1.1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
            width: 100%;
            margin-top: 10px;
        }

        .tetris-btn:hover {
            background: #ff1a6b;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(255, 45, 117, 0.3);
        }

        .tetris-btn:active {
            transform: translateY(0);
        }

        #tetris-start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 35, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20;
            border-radius: 8px;
        }

        #tetris-game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 35, 0.9);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 15;
            border-radius: 8px;
        }

        .tetris-screen-title {
            color: var(--primary);
            font-size: 3.5rem;
            margin-bottom: 30px;
            text-shadow: 0 0 15px rgba(255, 45, 117, 0.5);
            font-weight: 800;
        }

        .tetris-screen-subtitle {
            color: var(--accent);
            font-size: 1.5rem;
            margin-bottom: 40px;
        }

        .tetris-controls-list {
            list-style: none;
            margin-bottom: 30px;
        }

        .tetris-controls-list li {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .tetris-key {
            display: inline-block;
            background: var(--secondary);
            padding: 5px 10px;
            border-radius: 4px;
            margin-right: 10px;
            min-width: 30px;
            text-align: center;
            font-weight: 600;
        }

        /* Couleurs des pi√®ces Tetris */
        .piece-I { background-color: #00F0FF; }
        .piece-J { background-color: #0000FF; }
        .piece-L { background-color: #FF8000; }
        .piece-O { background-color: #FFFF00; }
        .piece-S { background-color: #00FF00; }
        .piece-T { background-color: #8000FF; }
        .piece-Z { background-color: #FF0000; }

        /* Styles pour Banana Clicker */
        #banana-clicker-game {
            text-align: center;
        }

        #banana {
            width: 220px;
            height: 220px;
            cursor: pointer;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="%23FFC107" d="M85 25c-5-15-25-15-30 0-5-15-25-15-30 0-5 15 0 35 15 50 15 15 35 20 50 15 15-5 20-25 15-40-5-15-15-20-20-25z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            transition: transform 0.1s;
            filter: drop-shadow(0 10px 20px rgba(255,160,0,0.4));
            margin: 0 auto 20px;
        }

        #banana:active {
            transform: scale(0.92);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .click-effect {
            position: absolute;
            font-size: 1.8rem;
            animation: floatAway 1.5s forwards;
            z-index: 100;
            pointer-events: none;
            font-weight: 700;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        @keyframes floatAway {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100px) rotate(20deg); opacity: 0; }
        }

        #banana-counter {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--warning);
        }

        #banana-bps {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .banana-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .banana-upgrades {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .banana-upgrade {
            background: var(--secondary);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--warning);
        }

        .banana-upgrade-title {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: var(--accent);
        }

        .banana-upgrade-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .banana-upgrade-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .banana-upgrade-cost {
            color: var(--primary);
            font-weight: 600;
        }

        .banana-upgrade-owned {
            color: var(--success);
        }

        .banana-btn {
            background: var(--warning);
            color: var(--dark);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .banana-btn:hover {
            transform: translateY(-2px);
        }

        .banana-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .game-grid {
                grid-template-columns: 1fr;
            }
            
            .game-card-image {
                height: 150px;
            }
            
            #color-display {
                width: 200px;
                height: 200px;
            }
            
            #tetris-container {
                flex-direction: column;
                align-items: center;
            }
            
            #tetris-side-panel {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">Arcade Hub</div>
            <div class="tagline">Collection de mini-jeux</div>
        </header>

        <div class="game-grid">
            <!-- Carte Click Color -->
            <div class="game-card" onclick="openGame('click-color')">
                <div class="game-card-image" style="background-color: #FF5733;">
                    <div class="game-card-overlay">
                        <button class="play-button">
                            <i class="fas fa-play"></i> Jouer
                        </button>
                    </div>
                </div>
                <div class="game-card-content">
                    <h3 class="game-card-title">Click Color</h3>
                    <p class="game-card-description">Cliquez sur la couleur affich√©e pour marquer des points. Simple mais addictif!</p>
                    <div>
                        <span class="game-card-tag tag-action">Action</span>
                        <span class="game-card-tag tag-puzzle">R√©flexe</span>
                    </div>
                </div>
            </div>

            <!-- Carte Tetris -->
            <div class="game-card" onclick="openGame('tetris')">
                <div class="game-card-image" style="background: linear-gradient(135deg, #00D1FF, #8000FF);">
                    <div class="game-card-overlay">
                        <button class="play-button">
                            <i class="fas fa-play"></i> Jouer
                        </button>
                    </div>
                </div>
                <div class="game-card-content">
                    <h3 class="game-card-title">Tetris</h3>
                    <p class="game-card-description">Le jeu de puzzle classique avec des graphismes modernes. Faites des lignes pour marquer des points!</p>
                    <div>
                        <span class="game-card-tag tag-puzzle">Puzzle</span>
                        <span class="game-card-tag tag-action">Classique</span>
                    </div>
                </div>
            </div>

            <!-- Carte Banana Clicker -->
            <div class="game-card" onclick="openGame('banana-clicker')">
                <div class="game-card-image" style="background: linear-gradient(135deg, #FFC107, #FF5722);">
                    <div class="game-card-overlay">
                        <button class="play-button">
                            <i class="fas fa-play"></i> Jouer
                        </button>
                    </div>
                </div>
                <div class="game-card-content">
                    <h3 class="game-card-title">Banana Clicker</h3>
                    <p class="game-card-description">Cliquez pour collecter des bananes, d√©bloquez des am√©liorations et construisez votre empire bananier!</p>
                    <div>
                        <span class="game-card-tag tag-idle">Incremental</span>
                        <span class="game-card-tag tag-action">Clicker</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vue Click Color -->
        <div id="click-color-view" class="game-view">
            <div class="game-header">
                <h2 class="game-title">Click Color</h2>
                <button class="back-button" onclick="closeGame()">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
            </div>
            
            <div class="game-container" id="click-color-game">
                <div id="click-counter">0</div>
                <div id="color-display"></div>
                <div id="color-value">#FFFFFF</div>
                
                <div class="color-stats">
                    <div class="stat-box">
                        <div class="stat-label">Meilleur score</div>
                        <div class="stat-value" id="best-score">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Taux de r√©ussite</div>
                        <div class="stat-value" id="success-rate">0%</div>
                    </div>
                </div>
                
                <div class="color-controls">
                    <button class="color-button" onclick="resetClickColor()">
                        <i class="fas fa-redo"></i> R√©initialiser
                    </button>
                    <button class="color-button" onclick="changeColorMode('hex')">
                        <i class="fas fa-hashtag"></i> Mode HEX
                    </button>
                    <button class="color-button" onclick="changeColorMode('rgb')">
                        <i class="fas fa-palette"></i> Mode RGB
                    </button>
                </div>
            </div>
        </div>

        <!-- Vue Tetris -->
        <div id="tetris-view" class="game-view">
            <div class="game-header">
                <h2 class="game-title">Tetris</h2>
                <button class="back-button" onclick="closeGame()">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
            </div>
            
            <div class="game-container">
                <div id="tetris-container">
                    <div id="tetris-main-game" style="position: relative;">
                        <canvas id="tetris-board" width="300" height="600"></canvas>
                        
                        <div id="tetris-start-screen">
                            <h1 class="tetris-screen-title">TETRIS</h1>
                            <p class="tetris-screen-subtitle">Un jeu classique r√©invent√©</p>
                            <button id="tetris-start-btn" class="tetris-btn">COMMENCER</button>
                            
                            <ul class="tetris-controls-list">
                                <li><span class="tetris-key">‚Üê ‚Üí</span> D√©placer</li>
                                <li><span class="tetris-key">‚Üë</span> Tourner</li>
                                <li><span class="tetris-key">‚Üì</span> Descendre</li>
                                <li><span class="tetris-key">Espace</span> Tomber</li>
                                <li><span class="tetris-key">P</span> Pause</li>
                            </ul>
                        </div>
                        
                        <div id="tetris-game-over">
                            <h1 class="tetris-screen-title">GAME OVER</h1>
                            <div class="tetris-screen-subtitle" id="tetris-final-score">Score: 0</div>
                            <button id="tetris-restart-btn" class="tetris-btn">REJOUER</button>
                        </div>
                    </div>
                    
                    <div id="tetris-side-panel">
                        <div class="tetris-panel">
                            <h2 class="tetris-panel-title">Prochaine pi√®ce</h2>
                            <div id="next-piece-container">
                                <div id="next-piece"></div>
                            </div>
                        </div>
                        
                        <div class="tetris-panel">
                            <h2 class="tetris-panel-title">Score</h2>
                            <div id="tetris-score-display">0</div>
                            <div id="tetris-level-display">Niveau: 1</div>
                        </div>
                        
                        <div class="tetris-panel">
                            <h2 class="tetris-panel-title">Contr√¥les</h2>
                            <button id="tetris-pause-btn" class="tetris-btn">PAUSE</button>
                            <button id="tetris-new-game-btn" class="tetris-btn">NOUVELLE PARTIE</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vue Banana Clicker -->
        <div id="banana-clicker-view" class="game-view">
            <div class="game-header">
                <h2 class="game-title">Banana Clicker</h2>
                <button class="back-button" onclick="closeGame()">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
            </div>
            
            <div class="game-container" id="banana-clicker-game">
                <div id="banana-counter">0 bananes</div>
                <div id="banana-bps">0 bananes/seconde</div>
                <div id="banana-container">
                    <div id="banana" title="Cliquez pour gagner des bananes!"></div>
                </div>
                
                <div class="banana-stats">
                    <div class="stat-box">
                        <div class="stat-label">Total clics</div>
                        <div class="stat-value" id="banana-total-clicks">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Multiplicateur</div>
                        <div class="stat-value" id="banana-multiplier">1x</div>
                    </div>
                </div>
                
                <h3>Am√©liorations</h3>
                <div class="banana-upgrades" id="banana-upgrades-container">
                    <!-- Les am√©liorations seront ajout√©es dynamiquement -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Gestion des vues de jeu
        function openGame(gameId) {
            document.querySelectorAll('.game-view').forEach(view => {
                view.style.display = 'none';
            });
            document.getElementById(`${gameId}-view`).style.display = 'block';
            
            // Initialiser le jeu si ce n'est pas d√©j√† fait
            if (gameId === 'click-color' && !window.clickColorInitialized) {
                initClickColor();
                window.clickColorInitialized = true;
            } else if (gameId === 'tetris' && !window.tetrisInitialized) {
                initTetris();
                window.tetrisInitialized = true;
            } else if (gameId === 'banana-clicker' && !window.bananaClickerInitialized) {
                initBananaClicker();
                window.bananaClickerInitialized = true;
            }
        }

        function closeGame() {
            document.querySelectorAll('.game-view').forEach(view => {
                view.style.display = 'none';
            });
        }

        // Jeu Click Color
        function initClickColor() {
            const colorDisplay = document.getElementById('color-display');
            const colorValue = document.getElementById('color-value');
            const clickCounter = document.getElementById('click-counter');
            const bestScore = document.getElementById('best-score');
            const successRate = document.getElementById('success-rate');
            
            let score = 0;
            let best = localStorage.getItem('clickColorBestScore') || 0;
            let totalClicks = 0;
            let successfulClicks = 0;
            let colorMode = 'hex'; // 'hex' ou 'rgb'
            
            bestScore.textContent = best;
            
            function getRandomColor() {
                const letters = '0123456789ABCDEF';
                let color = '#';
                for (let i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }
            
            function getRandomRGB() {
                const r = Math.floor(Math.random() * 256);
                const g = Math.floor(Math.random() * 256);
                const b = Math.floor(Math.random() * 256);
                return `rgb(${r}, ${g}, ${b})`;
            }
            
            function updateColor() {
                if (colorMode === 'hex') {
                    const color = getRandomColor();
                    colorDisplay.style.backgroundColor = color;
                    colorValue.textContent = color;
                } else {
                    const color = getRandomRGB();
                    colorDisplay.style.backgroundColor = color;
                    colorValue.textContent = color;
                }
            }
            
            function handleClick() {
                totalClicks++;
                const currentColor = colorDisplay.style.backgroundColor;
                const displayedValue = colorValue.textContent;
                
                let isCorrect = false;
                
                if (colorMode === 'hex') {
                    // Convertir la couleur RGB affich√©e en HEX pour comparaison
                    const rgbToHex = (rgb) => {
                        const values = rgb.match(/\d+/g);
                        const hex = values.map(v => {
                            const val = parseInt(v);
                            return val.toString(16).padStart(2, '0');
                        });
                        return `#${hex.join('').toUpperCase()}`;
                    };
                    
                    const actualHex = rgbToHex(currentColor);
                    isCorrect = actualHex === displayedValue;
                } else {
                    // En mode RGB, on compare directement
                    isCorrect = currentColor === displayedValue;
                }
                
                if (isCorrect) {
                    score++;
                    successfulClicks++;
                    clickCounter.textContent = score;
                    colorDisplay.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        colorDisplay.style.transform = 'scale(1)';
                    }, 100);
                    
                    if (score > best) {
                        best = score;
                        bestScore.textContent = best;
                        localStorage.setItem('clickColorBestScore', best);
                    }
                } else {
                    score = 0;
                    clickCounter.textContent = score;
                }
                
                // Mettre √† jour le taux de r√©ussite
                const rate = Math.round((successfulClicks / totalClicks) * 100);
                successRate.textContent = `${rate}%`;
                
                updateColor();
            }
            
            function resetGame() {
                score = 0;
                totalClicks = 0;
                successfulClicks = 0;
                clickCounter.textContent = score;
                successRate.textContent = '0%';
                updateColor();
            }
            
            function changeMode(mode) {
                colorMode = mode;
                resetGame();
            }
            
            // √âv√©nements
            colorDisplay.addEventListener('click', handleClick);
            document.getElementById('color-display').addEventListener('click', handleClick);
            window.resetClickColor = resetGame;
            window.changeColorMode = changeMode;
            
            // D√©marrer le jeu
            updateColor();
        }

        // Jeu Tetris
        function initTetris() {
            document.addEventListener('DOMContentLoaded', () => {
                // √âl√©ments du DOM
                const canvas = document.getElementById('tetris-board');
                const ctx = canvas.getContext('2d');
                const nextPieceEl = document.getElementById('next-piece');
                const scoreDisplay = document.getElementById('tetris-score-display');
                const levelDisplay = document.getElementById('tetris-level-display');
                const finalScoreDisplay = document.getElementById('tetris-final-score');
                const gameOverScreen = document.getElementById('tetris-game-over');
                const startScreen = document.getElementById('tetris-start-screen');
                const startBtn = document.getElementById('tetris-start-btn');
                const restartBtn = document.getElementById('tetris-restart-btn');
                const pauseBtn = document.getElementById('tetris-pause-btn');
                const newGameBtn = document.getElementById('tetris-new-game-btn');
                
                // Configuration du jeu
                const blockSize = 30;
                const cols = 10;
                const rows = 20;
                
                // Variables du jeu
                let board = [];
                let currentPiece = null;
                let nextPiece = null;
                let piecePos = { x: 0, y: 0 };
                let score = 0;
                let level = 1;
                let lines = 0;
                let dropCounter = 0;
                let dropInterval = 1000;
                let lastTime = 0;
                let animationId = null;
                let isPaused = false;
                let gameOver = false;
                let gameStarted = false;
                
                // Pi√®ces du Tetris
                const pieces = [
                    { 
                        shape: [[1, 1, 1, 1]], 
                        className: 'piece-I',
                        color: '#00F0FF'
                    },
                    { 
                        shape: [[1, 0, 0], [1, 1, 1]], 
                        className: 'piece-J',
                        color: '#0000FF'
                    },
                    { 
                        shape: [[0, 0, 1], [1, 1, 1]], 
                        className: 'piece-L',
                        color: '#FF8000'
                    },
                    { 
                        shape: [[1, 1], [1, 1]], 
                        className: 'piece-O',
                        color: '#FFFF00'
                    },
                    { 
                        shape: [[0, 1, 1], [1, 1, 0]], 
                        className: 'piece-S',
                        color: '#00FF00'
                    },
                    { 
                        shape: [[0, 1, 0], [1, 1, 1]], 
                        className: 'piece-T',
                        color: '#8000FF'
                    },
                    { 
                        shape: [[1, 1, 0], [0, 1, 1]], 
                        className: 'piece-Z',
                        color: '#FF0000'
                    }
                ];
                
                // Initialisation du jeu
                function init() {
                    // R√©initialiser l'√©tat du jeu
                    board = Array.from({ length: rows }, () => Array(cols).fill(0));
                    score = 0;
                    level = 1;
                    lines = 0;
                    dropInterval = 1000;
                    dropCounter = 0;
                    gameOver = false;
                    isPaused = false;
                    gameStarted = true;
                    
                    // Cr√©er les premi√®res pi√®ces
                    currentPiece = getRandomPiece();
                    nextPiece = getRandomPiece();
                    spawnPiece();
                    
                    // Mettre √† jour l'affichage
                    updateScore();
                    updateNextPiece();
                    
                    // Cacher les √©crans
                    startScreen.style.display = 'none';
                    gameOverScreen.style.display = 'none';
                    
                    // D√©marrer la boucle de jeu
                    lastTime = performance.now();
                    if (animationId) cancelAnimationFrame(animationId);
                    animationId = requestAnimationFrame(gameLoop);
                }
                
                // Obtenir une pi√®ce al√©atoire
                function getRandomPiece() {
                    const index = Math.floor(Math.random() * pieces.length);
                    return {
                        shape: pieces[index].shape,
                        className: pieces[index].className,
                        color: pieces[index].color
                    };
                }
                
                // Faire appara√Ætre une nouvelle pi√®ce
                function spawnPiece() {
                    currentPiece = nextPiece;
                    nextPiece = getRandomPiece();
                    piecePos.x = Math.floor(cols / 2) - Math.floor(currentPiece.shape[0].length / 2);
                    piecePos.y = 0;
                    
                    // V√©rifier le game over
                    if (collision()) {
                        gameOver = true;
                        finalScoreDisplay.textContent = `Score: ${score}`;
                        gameOverScreen.style.display = 'flex';
                    }
                    
                    updateNextPiece();
                }
                
                // Dessiner le plateau
                function drawBoard() {
                    // Fond
                    ctx.fillStyle = '#1A1A23';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    
                    // Grille
                    ctx.strokeStyle = '#2B2B36';
                    ctx.lineWidth = 1;
                    for (let y = 0; y < rows; y++) {
                        for (let x = 0; x < cols; x++) {
                            ctx.strokeRect(x * blockSize, y * blockSize, blockSize, blockSize);
                        }
                    }
                    
                    // Pi√®ces plac√©es
                    for (let y = 0; y < rows; y++) {
                        for (let x = 0; x < cols; x++) {
                            if (board[y][x]) {
                                drawBlock(x, y, board[y][x]);
                            }
                        }
                    }
                    
                    // Pi√®ce courante
                    if (currentPiece) {
                        currentPiece.shape.forEach((row, y) => {
                            row.forEach((value, x) => {
                                if (value) {
                                    drawBlock(
                                        piecePos.x + x,
                                        piecePos.y + y,
                                        currentPiece.color
                                    );
                                }
                            });
                        });
                    }
                }
                
                // Dessiner un bloc
                function drawBlock(x, y, color) {
                    // Bloc principal
                    ctx.fillStyle = color;
                    ctx.fillRect(x * blockSize, y * blockSize, blockSize, blockSize);
                    
                    // Effet 3D
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                    ctx.fillRect(x * blockSize, y * blockSize, blockSize, 3);
                    ctx.fillRect(x * blockSize, y * blockSize, 3, blockSize);
                    
                    ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                    ctx.fillRect(x * blockSize + 3, y * blockSize + blockSize - 3, blockSize - 3, 3);
                    ctx.fillRect(x * blockSize + blockSize - 3, y * blockSize + 3, 3, blockSize - 6);
                    
                    // Bordure
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                    ctx.strokeRect(x * blockSize, y * blockSize, blockSize, blockSize);
                }
                
                // Mettre √† jour l'affichage de la prochaine pi√®ce
                function updateNextPiece() {
                    nextPieceEl.innerHTML = '';
                    
                    if (!nextPiece) return;
                    
                    const pieceWidth = nextPiece.shape[0].length * 20;
                    const pieceHeight = nextPiece.shape.length * 20;
                    const offsetX = (120 - pieceWidth) / 2;
                    const offsetY = (120 - pieceHeight) / 2;
                    
                    const pieceDiv = document.createElement('div');
                    pieceDiv.style.position = 'relative';
                    pieceDiv.style.width = `${pieceWidth}px`;
                    pieceDiv.style.height = `${pieceHeight}px`;
                    
                    nextPiece.shape.forEach((row, y) => {
                        row.forEach((value, x) => {
                            if (value) {
                                const block = document.createElement('div');
                                block.style.position = 'absolute';
                                block.style.left = `${x * 20}px`;
                                block.style.top = `${y * 20}px`;
                                block.style.width = '20px';
                                block.style.height = '20px';
                                block.style.backgroundColor = nextPiece.color;
                                block.style.borderRadius = '3px';
                                block.style.boxShadow = 'inset 0 0 0 1px rgba(255,255,255,0.2)';
                                pieceDiv.appendChild(block);
                            }
                        });
                    });
                    
                    nextPieceEl.appendChild(pieceDiv);
                }
                
                // V√©rifier les collisions
                function collision() {
                    for (let y = 0; y < currentPiece.shape.length; y++) {
                        for (let x = 0; x < currentPiece.shape[y].length; x++) {
                            if (currentPiece.shape[y][x]) {
                                const boardX = piecePos.x + x;
                                const boardY = piecePos.y + y;
                                
                                if (
                                    boardX < 0 ||
                                    boardX >= cols ||
                                    boardY >= rows ||
                                    (boardY >= 0 && board[boardY][boardX])
                                ) {
                                    return true;
                                }
                            }
                        }
                    }
                    return false;
                }
                
                // Rotation de la pi√®ce
                function rotatePiece() {
                    if (isPaused || !gameStarted) return;
                    
                    const originalShape = currentPiece.shape;
                    const rows = currentPiece.shape.length;
                    const cols = currentPiece.shape[0].length;
                    const newShape = Array.from({ length: cols }, () => Array(rows).fill(0));
                    
                    for (let y = 0; y < rows; y++) {
                        for (let x = 0; x < cols; x++) {
                            newShape[x][rows - 1 - y] = currentPiece.shape[y][x];
                        }
                    }
                    
                    currentPiece.shape = newShape;
                    
                    if (collision()) {
                        currentPiece.shape = originalShape;
                    }
                }
                
                // Fusionner la pi√®ce avec le plateau
                function merge() {
                    currentPiece.shape.forEach((row, y) => {
                        row.forEach((value, x) => {
                            if (value) {
                                const boardY = piecePos.y + y;
                                const boardX = piecePos.x + x;
                                if (boardY >= 0) {
                                    board[boardY][boardX] = currentPiece.color;
                                }
                            }
                        });
                    });
                }
                
                // Supprimer les lignes compl√®tes
                function clearLines() {
                    let linesCleared = 0;
                    
                    for (let y = rows - 1; y >= 0; y--) {
                        if (board[y].every(cell => cell !== 0)) {
                            board.splice(y, 1);
                            board.unshift(Array(cols).fill(0));
                            linesCleared++;
                            y++;
                        }
                    }
                    
                    if (linesCleared > 0) {
                        // Calcul du score
                        const points = [0, 40, 100, 300, 1200][linesCleared] * level;
                        score += points;
                        lines += linesCleared;
                        
                        // Augmentation du niveau
                        level = Math.floor(lines / 10) + 1;
                        dropInterval = Math.max(100, 1000 - (level - 1) * 100);
                        
                        updateScore();
                    }
                }
                
                // Mettre √† jour le score
                function updateScore() {
                    scoreDisplay.textContent = score;
                    levelDisplay.textContent = `Niveau: ${level}`;
                }
                
                // D√©placement de la pi√®ce
                function movePiece(dx, dy) {
                    if (isPaused || !gameStarted) return false;
                    
                    piecePos.x += dx;
                    piecePos.y += dy;
                    
                    if (collision()) {
                        piecePos.x -= dx;
                        piecePos.y -= dy;
                        
                        if (dy === 1) {
                            merge();
                            clearLines();
                            spawnPiece();
                        }
                        
                        return false;
                    }
                    
                    return true;
                }
                
                // Tomber rapidement
                function hardDrop() {
                    if (isPaused || !gameStarted) return;
                    
                    while (movePiece(0, 1)) {}
                }
                
                // Boucle de jeu principale
                function gameLoop(timestamp) {
                    if (gameOver) return;
                    if (isPaused) {
                        animationId = requestAnimationFrame(gameLoop);
                        return;
                    }
                    
                    const deltaTime = timestamp - lastTime;
                    lastTime = timestamp;
                    
                    dropCounter += deltaTime;
                    if (dropCounter > dropInterval) {
                        movePiece(0, 1);
                        dropCounter = 0;
                    }
                    
                    drawBoard();
                    animationId = requestAnimationFrame(gameLoop);
                }
                
                // Gestion des touches
                document.addEventListener('keydown', e => {
                    if (!gameStarted && e.key === 'Enter') {
                        init();
                        return;
                    }
                    
                    if (gameOver && e.key === 'Enter') {
                        init();
                        return;
                    }
                    
                    if (!gameStarted || gameOver) return;
                    
                    switch (e.key) {
                        case 'ArrowLeft':
                            movePiece(-1, 0);
                            break;
                        case 'ArrowRight':
                            movePiece(1, 0);
                            break;
                        case 'ArrowDown':
                            movePiece(0, 1);
                            dropCounter = 0;
                            break;
                        case 'ArrowUp':
                            rotatePiece();
                            break;
                        case ' ':
                            hardDrop();
                            break;
                        case 'p':
                        case 'P':
                            togglePause();
                            break;
                    }
                });
                
                // Basculer pause
                function togglePause() {
                    if (!gameStarted || gameOver) return;
                    
                    isPaused = !isPaused;
                    pauseBtn.textContent = isPaused ? 'REPRENDRE' : 'PAUSE';
                    
                    if (!isPaused) {
                        lastTime = performance.now();
                        animationId = requestAnimationFrame(gameLoop);
                    }
                }
                
                // √âv√©nements des boutons
                startBtn.addEventListener('click', init);
                restartBtn.addEventListener('click', init);
                pauseBtn.addEventListener('click', togglePause);
                newGameBtn.addEventListener('click', () => {
                    if (animationId) cancelAnimationFrame(animationId);
                    init();
                });
                
                // Dessiner l'√©cran de d√©marrage
                drawBoard();
            });
        }

        // Jeu Banana Clicker
        function initBananaClicker() {
            // Variables du jeu
            let bananas = 0;
            let totalClicks = 0;
            let bananasPerSecond = 0;
            let multiplier = 1;
            
            // Am√©liorations disponibles
            const upgrades = [
                { 
                    id: 'monkey', 
                    name: 'Singe Assistant', 
                    description: 'Un petit singe qui travaille pour vous', 
                    baseCost: 15, 
                    bps: 0.2,
                    owned: 0
                },
                { 
                    id: 'farm', 
                    name: 'Ferme Banani√®re', 
                    description: 'Une plantation de bananes basique', 
                    baseCost: 100, 
                    bps: 1,
                    owned: 0
                },
                { 
                    id: 'factory', 
                    name: 'Usine de Bananes', 
                    description: 'Transforme les bananes en produits d√©riv√©s', 
                    baseCost: 500, 
                    bps: 4,
                    owned: 0
                },
                { 
                    id: 'plantation', 
                    name: 'Plantation G√©ante', 
                    description: 'Dominez le march√© de la banane', 
                    baseCost: 3000, 
                    bps: 10,
                    owned: 0
                },
                { 
                    id: 'research', 
                    name: 'Laboratoire de Recherche', 
                    description: 'Bananes g√©n√©tiquement modifi√©es', 
                    baseCost: 10000, 
                    bps: 25,
                    owned: 0
                }
            ];
            
            // √âl√©ments du DOM
            const bananaElement = document.getElementById('banana');
            const bananaCounter = document.getElementById('banana-counter');
            const bananaBps = document.getElementById('banana-bps');
            const totalClicksElement = document.getElementById('banana-total-clicks');
            const multiplierElement = document.getElementById('banana-multiplier');
            const upgradesContainer = document.getElementById('banana-upgrades-container');
            
            // Charger la sauvegarde si elle existe
            function loadSave() {
                const save = localStorage.getItem('bananaClickerSave');
                if (save) {
                    const data = JSON.parse(save);
                    bananas = data.bananas || 0;
                    totalClicks = data.totalClicks || 0;
                    bananasPerSecond = data.bananasPerSecond || 0;
                    multiplier = data.multiplier || 1;
                    
                    if (data.upgrades) {
                        data.upgrades.forEach(savedUpgrade => {
                            const upgrade = upgrades.find(u => u.id === savedUpgrade.id);
                            if (upgrade) {
                                upgrade.owned = savedUpgrade.owned || 0;
                            }
                        });
                    }
                    
                    updateBananasPerSecond();
                    updateDisplay();
                }
            }
            
            // Sauvegarder le jeu
            function saveGame() {
                const save = {
                    bananas,
                    totalClicks,
                    bananasPerSecond,
                    multiplier,
                    upgrades: upgrades.map(upgrade => ({
                        id: upgrade.id,
                        owned: upgrade.owned
                    }))
                };
                localStorage.setItem('bananaClickerSave', JSON.stringify(save));
            }
            
            // Mettre √† jour l'affichage
            function updateDisplay() {
                bananaCounter.textContent = `${Math.floor(bananas)} bananes`;
                bananaBps.textContent = `${bananasPerSecond.toFixed(1)} bananes/seconde`;
                totalClicksElement.textContent = totalClicks;
                multiplierElement.textContent = `${multiplier.toFixed(1)}x`;
                
                // Mettre √† jour les boutons d'am√©lioration
                upgrades.forEach(upgrade => {
                    const btn = document.getElementById(`${upgrade.id}-btn`);
                    if (btn) {
                        const cost = getUpgradeCost(upgrade);
                        btn.disabled = bananas < cost;
                    }
                });
            }
            
            // Calculer le co√ªt d'une am√©lioration
            function getUpgradeCost(upgrade) {
                return Math.floor(upgrade.baseCost * Math.pow(1.15, upgrade.owned));
            }
            
            // Mettre √† jour les bananes par seconde
            function updateBananasPerSecond() {
                bananasPerSecond = upgrades.reduce((total, upgrade) => {
                    return total + (upgrade.bps * upgrade.owned);
                }, 0);
            }
            
            // G√©rer le clic sur la banane
            function handleBananaClick() {
                bananas += multiplier;
                totalClicks++;
                
                // Effet visuel
                const clickEffect = document.createElement('div');
                clickEffect.className = 'click-effect';
                clickEffect.textContent = `+${multiplier.toFixed(1)}`;
                clickEffect.style.left = `${Math.random() * 100 + 50}px`;
                clickEffect.style.color = `hsl(${Math.random() * 60 + 30}, 100%, 50%)`;
                document.getElementById('banana-container').appendChild(clickEffect);
                
                setTimeout(() => {
                    clickEffect.remove();
                }, 1500);
                
                updateDisplay();
                saveGame();
            }
            
            // Acheter une am√©lioration
            function buyUpgrade(upgradeId) {
                const upgrade = upgrades.find(u => u.id === upgradeId);
                if (!upgrade) return;
                
                const cost = getUpgradeCost(upgrade);
                
                if (bananas >= cost) {
                    bananas -= cost;
                    upgrade.owned++;
                    
                    updateBananasPerSecond();
                    updateDisplay();
                    saveGame();
                    
                    // Effet sp√©cial pour les premi√®res am√©liorations
                    if (upgrade.owned === 1) {
                        multiplier += 0.1;
                    }
                }
            }
            
            // G√©n√©rer les cartes d'am√©lioration
            function renderUpgrades() {
                upgradesContainer.innerHTML = '';
                
                upgrades.forEach(upgrade => {
                    const cost = getUpgradeCost(upgrade);
                    const upgradeElement = document.createElement('div');
                    upgradeElement.className = 'banana-upgrade';
                    upgradeElement.innerHTML = `
                        <h4 class="banana-upgrade-title">${upgrade.name}</h4>
                        <p class="banana-upgrade-desc">${upgrade.description}</p>
                        <div class="banana-upgrade-info">
                            <span class="banana-upgrade-cost">Co√ªt: ${Math.floor(cost)}</span>
                            <span class="banana-upgrade-owned">Poss√©d√©s: ${upgrade.owned}</span>
                        </div>
                        <button id="${upgrade.id}-btn" class="banana-btn" onclick="buyBananaUpgrade('${upgrade.id}')">
                            Acheter
                        </button>
                    `;
                    
                    upgradesContainer.appendChild(upgradeElement);
                });
            }
            
            // Boucle de jeu pour les gains passifs
            function gameLoop() {
                const now = Date.now();
                const delta = (now - lastUpdate) / 1000; // en secondes
                lastUpdate = now;
                
                if (bananasPerSecond > 0) {
                    bananas += bananasPerSecond * delta;
                    updateDisplay();
                }
                
                // Sauvegarder p√©riodiquement
                if (now % 30000 < 100) { // ~toutes les 30 secondes
                    saveGame();
                }
                
                requestAnimationFrame(gameLoop);
            }
            
            // Exposer la fonction d'achat au scope global
            window.buyBananaUpgrade = buyUpgrade;
            
            // Initialiser le jeu
            let lastUpdate = Date.now();
            loadSave();
            renderUpgrades();
            bananaElement.addEventListener('click', handleBananaClick);
            gameLoop();
        }
    </script>
</body>
</html>