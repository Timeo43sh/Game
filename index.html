<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcade Hub - Mini Jeux</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #FF2D75;
            --secondary: #2B2B36;
            --dark: #1A1A23;
            --light: #F0F0F0;
            --accent: #00D1FF;
            --success: #4CAF50;
            --warning: #FFC107;
            --danger: #F44336;
            --card-bg: #242430;
            --text: #FFFFFF;
            --text-secondary: #B0B0B0;
            --golden: #FFD700;
            --prestige: #9C27B0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--dark);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--secondary);
        }

        .logo {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .game-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }

        .game-card-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .game-card-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .game-card:hover .game-card-overlay {
            opacity: 1;
        }

        .play-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: transform 0.2s ease;
        }

        .play-button:hover {
            transform: scale(1.05);
        }

        .game-card-content {
            padding: 20px;
        }

        .game-card-title {
            font-size: 1.4rem;
            margin-bottom: 10px;
            color: var(--accent);
        }

        .game-card-description {
            color: var(--text-secondary);
            margin-bottom: 15px;
            font-size: 0.95rem;
        }

        .game-card-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .game-card-tag {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 8px;
            margin-bottom: 8px;
        }

        .tag-action {
            background: var(--primary);
            color: white;
        }

        .tag-puzzle {
            background: var(--accent);
            color: var(--dark);
        }

        .tag-idle {
            background: var(--warning);
            color: var(--dark);
        }

        .game-view {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--dark);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--secondary);
        }

        .game-title {
            font-size: 1.8rem;
            color: var(--accent);
        }

        .back-button {
            background: var(--secondary);
            color: var(--text);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .game-container {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        /* Styles sp√©cifiques pour Click Color */
        #click-color-game {
            text-align: center;
        }

        #color-display {
            width: 250px;
            height: 250px;
            margin: 0 auto 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: transform 0.2s;
        }

        #color-display:active {
            transform: scale(0.98);
        }

        #color-value {
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-family: monospace;
            background: var(--secondary);
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
        }

        #click-counter {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--accent);
        }

        .color-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: var(--secondary);
            padding: 10px 15px;
            border-radius: 8px;
            min-width: 100px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .color-controls {
            margin-top: 20px;
        }

        .color-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin: 0 5px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .color-button:hover {
            background: #ff1a6b;
        }

        /* Styles pour Tetris */
        #tetris-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        #tetris-board {
            border: 3px solid var(--secondary);
            background: var(--dark);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            border-radius: 8px;
        }

        #tetris-side-panel {
            display: flex;
            flex-direction: column;
            gap: 25px;
            width: 200px;
        }

        .tetris-panel {
            background: var(--secondary);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .tetris-panel-title {
            font-size: 1.3rem;
            color: var(--accent);
            margin-bottom: 15px;
            text-align: center;
            font-weight: 600;
        }

        #next-piece-container {
            width: 160px;
            height: 160px;
            margin: 0 auto;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }

        #next-piece {
            position: relative;
            width: 120px;
            height: 120px;
        }

        #tetris-score-display {
            font-size: 2rem;
            text-align: center;
            margin: 15px 0;
            color: var(--light);
            font-weight: 700;
        }

        #tetris-level-display {
            font-size: 1.2rem;
            text-align: center;
            color: var(--accent);
        }

        .tetris-btn {
            background: var(--primary);
            border: none;
            color: white;
            padding: 12px 24px;
            font-size: 1.1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
            width: 100%;
            margin-top: 10px;
        }

        .tetris-btn:hover {
            background: #ff1a6b;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(255, 45, 117, 0.3);
        }

        .tetris-btn:active {
            transform: translateY(0);
        }

        #tetris-start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 35, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20;
            border-radius: 8px;
        }

        #tetris-game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 35, 0.9);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 15;
            border-radius: 8px;
        }

        .tetris-screen-title {
            color: var(--primary);
            font-size: 3.5rem;
            margin-bottom: 30px;
            text-shadow: 0 0 15px rgba(255, 45, 117, 0.5);
            font-weight: 800;
        }

        .tetris-screen-subtitle {
            color: var(--accent);
            font-size: 1.5rem;
            margin-bottom: 40px;
        }

        .tetris-controls-list {
            list-style: none;
            margin-bottom: 30px;
        }

        .tetris-controls-list li {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .tetris-key {
            display: inline-block;
            background: var(--secondary);
            padding: 5px 10px;
            border-radius: 4px;
            margin-right: 10px;
            min-width: 30px;
            text-align: center;
            font-weight: 600;
        }

        /* Couleurs des pi√®ces Tetris */
        .piece-I { background-color: #00F0FF; }
        .piece-J { background-color: #0000FF; }
        .piece-L { background-color: #FF8000; }
        .piece-O { background-color: #FFFF00; }
        .piece-S { background-color: #00FF00; }
        .piece-T { background-color: #8000FF; }
        .piece-Z { background-color: #FF0000; }

        /* Styles pour Banana Clicker */
        #banana-clicker-game {
            text-align: center;
        }

        #banana {
            width: 220px;
            height: 220px;
            cursor: pointer;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="%23FFC107" d="M85 25c-5-15-25-15-30 0-5-15-25-15-30 0-5 15 0 35 15 50 15 15 35 20 50 15 15-5 20-25 15-40-5-15-15-20-20-25z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            transition: transform 0.1s;
            filter: drop-shadow(0 10px 20px rgba(255,160,0,0.4));
            margin: 0 auto 20px;
        }

        #banana:active {
            transform: scale(0.92);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .click-effect {
            position: absolute;
            font-size: 1.8rem;
            animation: floatAway 1.5s forwards;
            z-index: 100;
            pointer-events: none;
            font-weight: 700;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .click-effect.special {
            animation: floatAway 1.5s forwards, pulse 0.5s infinite alternate;
            z-index: 101;
            font-size: 2.2rem;
            font-weight: 900;
            text-shadow: 0 0 10px gold;
        }

        @keyframes floatAway {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100px) rotate(20deg); opacity: 0; }
        }

        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.2); }
        }

        #banana-counter {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--warning);
        }

        #banana-bps {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .banana-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .banana-upgrades {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .banana-upgrade {
            background: var(--secondary);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--warning);
        }

        .banana-upgrade-title {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: var(--accent);
        }

        .banana-upgrade-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .banana-upgrade-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .banana-upgrade-cost {
            color: var(--primary);
            font-weight: 600;
        }

        .banana-upgrade-owned {
            color: var(--success);
        }

        .banana-btn {
            background: var(--warning);
            color: var(--dark);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .banana-btn:hover {
            transform: translateY(-2px);
        }

        .banana-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .banana-tab-buttons {
            display: flex;
            border-bottom: 2px solid var(--secondary);
            margin-bottom: 20px;
        }

        .banana-tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-secondary);
            position: relative;
        }

        .banana-tab-btn.active {
            color: var(--accent);
        }

        .banana-tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--accent);
        }

        .banana-tab-content {
            display: none;
        }

        .banana-tab-content.active {
            display: block;
        }

        .prestige-section {
            background: rgba(156, 39, 176, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid var(--prestige);
        }

        .prestige-btn {
            background: var(--prestige);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }

        .prestige-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .prestige-info {
            margin-bottom: 15px;
        }

        .golden-banana {
            color: var(--golden);
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .game-grid {
                grid-template-columns: 1fr;
            }
            
            .game-card-image {
                height: 150px;
            }
            
            #color-display {
                width: 200px;
                height: 200px;
            }
            
            #tetris-container {
                flex-direction: column;
                align-items: center;
            }
            
            #tetris-side-panel {
                width: 100%;
                max-width: 300px;
            }
        }

        /* Styles pour les nouvelles fonctionnalit√©s du Banana Clicker */
        .banana-events {
            margin: 15px 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .banana-event {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            animation: pulse 2s infinite alternate;
        }

        .event-icon {
            font-size: 1.5rem;
            margin-right: 15px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
        }

        .event-info {
            flex: 1;
        }

        .event-info h4 {
            margin: 0 0 5px;
            font-size: 1.1rem;
        }

        .event-info p {
            margin: 0 0 5px;
            font-size: 0.9rem;
        }

        .event-timer {
            font-weight: 600;
            font-size: 0.85rem;
            background: rgba(0, 0, 0, 0.2);
            padding: 2px 8px;
            border-radius: 10px;
            display: inline-block;
        }

        .achievement-notification, .game-notification {
            position: fixed;
            right: -400px;
            bottom: 20px;
            background: var(--secondary);
            border-left: 4px solid var(--primary);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            padding: 15px;
            width: 320px;
            z-index: 1000;
            transition: transform 0.4s ease, opacity 0.4s ease;
            opacity: 0;
        }

        .achievement-notification {
            display: flex;
            align-items: center;
        }

        .game-notification {
            padding: 15px 20px;
            background: var(--accent);
            color: var(--dark);
            text-align: center;
            font-weight: 600;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%) translateY(-100%);
        }

        .achievement-icon {
            font-size: 2rem;
            margin-right: 15px;
            color: var(--accent);
            width: 40px;
            text-align: center;
        }

        .achievement-info h4 {
            margin: 0 0 5px;
            color: var(--primary);
        }

        .achievement-info p {
            margin: 0 0 5px;
            font-size: 0.9rem;
        }

        .achievement-reward {
            color: var(--accent);
            font-weight: 600;
        }

        .banana-achievements {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .banana-achievement {
            background: var(--secondary);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .banana-achievement.locked {
            opacity: 0.6;
            filter: grayscale(0.8);
        }

        .banana-achievement.unlocked {
            border-left: 4px solid var(--accent);
        }

        .achievement-date {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .achievement-counter {
            background: var(--secondary);
            padding: 10px 15px;
            border-radius: 5px;
            text-align: center;
            margin: 10px 0;
            font-weight: 600;
            color: var(--accent);
        }

        .banana-stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: var(--secondary);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-label {
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
        }

        .banana-btn.can-afford {
            background: var(--primary);
            color: white;
        }

        @keyframes pulse {
            0% { opacity: 0.85; }
            100% { opacity: 1; }
        }

        /* Effet de pulsation sur la banane */
        #banana {
            animation: float 4s infinite ease-in-out;
        }

        /* Animation am√©lior√©e pour les clics */
        .click-effect {
            animation: floatAway 1.5s forwards, rotate 2s infinite;
        }

        @keyframes rotate {
            0% { transform: translateY(0) rotate(0deg); }
            100% { transform: translateY(-100px) rotate(20deg); }
        }

        /* Responsive design pour mobiles */
        @media (max-width: 768px) {
            .banana-events {
                margin: 10px 0;
            }
            
            .banana-event {
                padding: 8px 10px;
            }
            
            .event-icon {
                font-size: 1.2rem;
                margin-right: 10px;
                width: 30px;
                height: 30px;
            }
            
            .achievement-notification {
                width: 280px;
                right: -280px;
            }
            
            .banana-achievements {
                grid-template-columns: 1fr;
            }
            
            .banana-stats-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">Arcade Hub</div>
            <div class="tagline">Collection de mini-jeux</div>
        </header>

        <div class="game-grid">
            <!-- Carte Click Color -->
            <div class="game-card" onclick="openGame('click-color')">
                <div class="game-card-image" style="background-color: #FF5733;">
                    <div class="game-card-overlay">
                        <button class="play-button">
                            <i class="fas fa-play"></i> Jouer
                        </button>
                    </div>
                </div>
                <div class="game-card-content">
                    <h3 class="game-card-title">Click Color</h3>
                    <p class="game-card-description">Cliquez sur la couleur affich√©e pour marquer des points. Simple mais addictif!</p>
                    <div>
                        <span class="game-card-tag tag-action">Action</span>
                        <span class="game-card-tag tag-puzzle">R√©flexe</span>
                    </div>
                </div>
            </div>

            <!-- Carte Tetris -->
            <div class="game-card" onclick="openGame('tetris')">
                <div class="game-card-image" style="background: linear-gradient(135deg, #00D1FF, #8000FF);">
                    <div class="game-card-overlay">
                        <button class="play-button">
                            <i class="fas fa-play"></i> Jouer
                        </button>
                    </div>
                </div>
                <div class="game-card-content">
                    <h3 class="game-card-title">Tetris</h3>
                    <p class="game-card-description">Le jeu de puzzle classique avec des graphismes modernes. Faites des lignes pour marquer des points!</p>
                    <div>
                        <span class="game-card-tag tag-puzzle">Puzzle</span>
                        <span class="game-card-tag tag-action">Classique</span>
                    </div>
                </div>
            </div>

            <!-- Carte Banana Clicker -->
            <div class="game-card" onclick="openGame('banana-clicker')">
                <div class="game-card-image" style="background: linear-gradient(135deg, #FFC107, #FF5722);">
                    <div class="game-card-overlay">
                        <button class="play-button">
                            <i class="fas fa-play"></i> Jouer
                        </button>
                    </div>
                </div>
                <div class="game-card-content">
                    <h3 class="game-card-title">Banana Clicker</h3>
                    <p class="game-card-description">Cliquez pour collecter des bananes, d√©bloquez des am√©liorations et construisez votre empire bananier!</p>
                    <div>
                        <span class="game-card-tag tag-idle">Incremental</span>
                        <span class="game-card-tag tag-action">Clicker</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vue Click Color -->
        <div id="click-color-view" class="game-view">
            <div class="game-header">
                <h2 class="game-title">Click Color</h2>
                <button class="back-button" onclick="closeGame()">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
            </div>
            
            <div class="game-container" id="click-color-game">
                <div id="click-counter">0</div>
                <div id="color-display"></div>
                <div id="color-value">#FFFFFF</div>
                
                <div class="color-stats">
                    <div class="stat-box">
                        <div class="stat-label">Meilleur score</div>
                        <div class="stat-value" id="best-score">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Taux de r√©ussite</div>
                        <div class="stat-value" id="success-rate">0%</div>
                    </div>
                </div>
                
                <div class="color-controls">
                    <button class="color-button" onclick="resetClickColor()">
                        <i class="fas fa-redo"></i> R√©initialiser
                    </button>
                    <button class="color-button" onclick="changeColorMode('hex')">
                        <i class="fas fa-hashtag"></i> Mode HEX
                    </button>
                    <button class="color-button" onclick="changeColorMode('rgb')">
                        <i class="fas fa-palette"></i> Mode RGB
                    </button>
                </div>
            </div>
        </div>

        <!-- Vue Tetris -->
        <div id="tetris-view" class="game-view">
            <div class="game-header">
                <h2 class="game-title">Tetris</h2>
                <button class="back-button" onclick="closeGame()">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
            </div>
            
            <div class="game-container">
                <div id="tetris-container">
                    <div id="tetris-main-game" style="position: relative;">
                        <canvas id="tetris-board" width="300" height="600"></canvas>
                        
                        <div id="tetris-start-screen">
                            <h1 class="tetris-screen-title">TETRIS</h1>
                            <p class="tetris-screen-subtitle">Un jeu classique r√©invent√©</p>
                            <button id="tetris-start-btn" class="tetris-btn">COMMENCER</button>
                            
                            <ul class="tetris-controls-list">
                                <li><span class="tetris-key">‚Üê ‚Üí</span> D√©placer</li>
                                <li><span class="tetris-key">‚Üë</span> Tourner</li>
                                <li><span class="tetris-key">‚Üì</span> Descendre</li>
                                <li><span class="tetris-key">Espace</span> Tomber</li>
                                <li><span class="tetris-key">P</span> Pause</li>
                            </ul>
                        </div>
                        
                        <div id="tetris-game-over">
                            <h1 class="tetris-screen-title">GAME OVER</h1>
                            <div class="tetris-screen-subtitle" id="tetris-final-score">Score: 0</div>
                            <button id="tetris-restart-btn" class="tetris-btn">REJOUER</button>
                        </div>
                    </div>
                    
                    <div id="tetris-side-panel">
                        <div class="tetris-panel">
                            <h2 class="tetris-panel-title">Prochaine pi√®ce</h2>
                            <div id="next-piece-container">
                                <div id="next-piece"></div>
                            </div>
                        </div>
                        
                        <div class="tetris-panel">
                            <h2 class="tetris-panel-title">Score</h2>
                            <div id="tetris-score-display">0</div>
                            <div id="tetris-level-display">Niveau: 1</div>
                        </div>
                        
                        <div class="tetris-panel">
                            <h2 class="tetris-panel-title">Contr√¥les</h2>
                            <button id="tetris-pause-btn" class="tetris-btn">PAUSE</button>
                            <button id="tetris-new-game-btn" class="tetris-btn">NOUVELLE PARTIE</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vue Banana Clicker -->
        <div id="banana-clicker-view" class="game-view">
            <div class="game-header">
                <h2 class="game-title">Banana Clicker</h2>
                <button class="back-button" onclick="closeGame()">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
            </div>
            
            <div class="game-container" id="banana-clicker-game">
                <div id="banana-counter">0 bananes</div>
                <div id="banana-bps">0 bananes/seconde</div>
                <div id="banana-container">
                    <div id="banana" title="Cliquez pour gagner des bananes!"></div>
                </div>
                
                <div class="banana-stats">
                    <div class="stat-box">
                        <div class="stat-label">Total clics</div>
                        <div class="stat-value" id="banana-total-clicks">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Multiplicateur</div>
                        <div class="stat-value" id="banana-multiplier">1x</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Bananes dor√©es</div>
                        <div class="stat-value golden-banana" id="banana-golden">0</div>
                    </div>
                </div>
                
                <div class="banana-tab-buttons">
                    <button class="banana-tab-btn active" onclick="openBananaTab('upgrades')">Am√©liorations</button>
                    <button class="banana-tab-btn" onclick="openBananaTab('prestige')">Prestige</button>
                </div>
                
                <div id="banana-upgrades-tab" class="banana-tab-content active">
                    <h3>Am√©liorations de production</h3>
                    <div class="banana-upgrades" id="banana-upgrades-container">
                        <!-- Les am√©liorations seront ajout√©es dynamiquement -->
                    </div>
                    
                    <h3 style="margin-top: 20px;">Am√©liorations sp√©ciales</h3>
                    <div class="banana-upgrades" id="banana-special-upgrades-container">
                        <!-- Les am√©liorations sp√©ciales seront ajout√©es dynamiquement -->
                    </div>
                </div>
                
                <div id="banana-prestige-tab" class="banana-tab-content">
                    <div class="prestige-section">
                        <h3>Syst√®me de Prestige</h3>
                        <p class="prestige-info">
                            Effectuez un prestige pour r√©initialiser votre progression et gagner des <span class="golden-banana">Bananes Dor√©es</span> qui donnent des bonus permanents!
                        </p>
                        <p id="prestige-requirement">Vous avez besoin d'au moins 1,000,000 bananes pour effectuer un prestige.</p>
                        <p id="prestige-reward">Vous obtiendrez 0 Bananes Dor√©es</p>
                        <button class="prestige-btn" id="prestige-btn" disabled>PRESTIGE</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <audio id="clickSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3"></audio>
    <audio id="upgradeSound" src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3"></audio>
    <audio id="specialSound" src="https://assets.mixkit.co/sfx/preview/mixkit-extra-bonus-in-a-video-game-2045.mp3"></audio>
    <audio id="prestigeSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>

    <script>
        // Gestion des vues de jeu
        function openGame(gameId) {
            document.querySelectorAll('.game-view').forEach(view => {
                view.style.display = 'none';
            });
            document.getElementById(`${gameId}-view`).style.display = 'block';
            
            // Initialiser le jeu si ce n'est pas d√©j√† fait
            if (gameId === 'click-color' && !window.clickColorInitialized) {
                initClickColor();
                window.clickColorInitialized = true;
            } else if (gameId === 'tetris' && !window.tetrisInitialized) {
                initTetris();
                window.tetrisInitialized = true;
            } else if (gameId === 'banana-clicker' && !window.bananaClickerInitialized) {
                initBananaClicker();
                window.bananaClickerInitialized = true;
            }
        }

        function closeGame() {
            document.querySelectorAll('.game-view').forEach(view => {
                view.style.display = 'none';
            });
        }

        function openBananaTab(tabId) {
            document.querySelectorAll('#banana-clicker-game .banana-tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('#banana-clicker-game .banana-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelector(`#banana-clicker-game .banana-tab-btn[onclick="openBananaTab('${tabId}')"]`).classList.add('active');
            document.getElementById(`banana-${tabId}-tab`).classList.add('active');
        }

        // Jeu Click Color
        function initClickColor() {
            const colorDisplay = document.getElementById('color-display');
            const colorValue = document.getElementById('color-value');
            const clickCounter = document.getElementById('click-counter');
            const bestScore = document.getElementById('best-score');
            const successRate = document.getElementById('success-rate');
            
            let score = 0;
            let best = localStorage.getItem('clickColorBestScore') || 0;
            let totalClicks = 0;
            let successfulClicks = 0;
            let colorMode = 'hex'; // 'hex' ou 'rgb'
            
            bestScore.textContent = best;
            
            function getRandomColor() {
                const letters = '0123456789ABCDEF';
                let color = '#';
                for (let i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }
            
            function getRandomRGB() {
                const r = Math.floor(Math.random() * 256);
                const g = Math.floor(Math.random() * 256);
                const b = Math.floor(Math.random() * 256);
                return `rgb(${r}, ${g}, ${b})`;
            }
            
            function updateColor() {
                if (colorMode === 'hex') {
                    const color = getRandomColor();
                    colorDisplay.style.backgroundColor = color;
                    colorValue.textContent = color;
                } else {
                    const color = getRandomRGB();
                    colorDisplay.style.backgroundColor = color;
                    colorValue.textContent = color;
                }
            }
            
            function handleClick() {
                totalClicks++;
                const currentColor = colorDisplay.style.backgroundColor;
                const displayedValue = colorValue.textContent;
                
                let isCorrect = false;
                
                if (colorMode === 'hex') {
                    // Convertir la couleur RGB affich√©e en HEX pour comparaison
                    const rgbToHex = (rgb) => {
                        const values = rgb.match(/\d+/g);
                        const hex = values.map(v => {
                            const val = parseInt(v);
                            return val.toString(16).padStart(2, '0');
                        });
                        return `#${hex.join('').toUpperCase()}`;
                    };
                    
                    const actualHex = rgbToHex(currentColor);
                    isCorrect = actualHex === displayedValue;
                } else {
                    // En mode RGB, on compare directement
                    isCorrect = currentColor === displayedValue;
                }
                
                if (isCorrect) {
                    score++;
                    successfulClicks++;
                    clickCounter.textContent = score;
                    colorDisplay.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        colorDisplay.style.transform = 'scale(1)';
                    }, 100);
                    
                    if (score > best) {
                        best = score;
                        bestScore.textContent = best;
                        localStorage.setItem('clickColorBestScore', best);
                    }
                } else {
                    score = 0;
                    clickCounter.textContent = score;
                }
                
                // Mettre √† jour le taux de r√©ussite
                const rate = Math.round((successfulClicks / totalClicks) * 100);
                successRate.textContent = `${rate}%`;
                
                updateColor();
            }
            
            function resetGame() {
                score = 0;
                totalClicks = 0;
                successfulClicks = 0;
                clickCounter.textContent = score;
                successRate.textContent = '0%';
                updateColor();
            }
            
            function changeMode(mode) {
                colorMode = mode;
                resetGame();
            }
            
            // √âv√©nements
            colorDisplay.addEventListener('click', handleClick);
            window.resetClickColor = resetGame;
            window.changeColorMode = changeMode;
            
            // D√©marrer le jeu
            updateColor();
        }

        // Jeu Tetris
        function initTetris() {
            // √âl√©ments du DOM
            const canvas = document.getElementById('tetris-board');
            const ctx = canvas.getContext('2d');
            const nextPieceEl = document.getElementById('next-piece');
            const scoreDisplay = document.getElementById('tetris-score-display');
            const levelDisplay = document.getElementById('tetris-level-display');
            const finalScoreDisplay = document.getElementById('tetris-final-score');
            const gameOverScreen = document.getElementById('tetris-game-over');
            const startScreen = document.getElementById('tetris-start-screen');
            const startBtn = document.getElementById('tetris-start-btn');
            const restartBtn = document.getElementById('tetris-restart-btn');
            const pauseBtn = document.getElementById('tetris-pause-btn');
            const newGameBtn = document.getElementById('tetris-new-game-btn');
            
            // Configuration du jeu
            const blockSize = 30;
            const cols = canvas.width / blockSize;
            const rows = canvas.height / blockSize;
            
            // Variables du jeu
            let board = Array(rows).fill().map(() => Array(cols).fill(0));
            let currentPiece = null;
            let nextPiece = null;
            let piecePos = { x: 0, y: 0 };
            let score = 0;
            let level = 1;
            let lines = 0;
            let dropCounter = 0;
            let dropInterval = 1000;
            let lastTime = 0;
            let animationId = null;
            let isPaused = false;
            let gameOver = false;
            let gameStarted = false;
            
            // Pi√®ces du Tetris
            const pieces = [
                { 
                    shape: [[1, 1, 1, 1]], 
                    color: '#00F0FF'
                },
                { 
                    shape: [[1, 0, 0], [1, 1, 1]], 
                    color: '#0000FF'
                },
                { 
                    shape: [[0, 0, 1], [1, 1, 1]], 
                    color: '#FF8000'
                },
                { 
                    shape: [[1, 1], [1, 1]], 
                    color: '#FFFF00'
                },
                { 
                    shape: [[0, 1, 1], [1, 1, 0]], 
                    color: '#00FF00'
                },
                { 
                    shape: [[0, 1, 0], [1, 1, 1]], 
                    color: '#8000FF'
                },
                { 
                    shape: [[1, 1, 0], [0, 1, 1]], 
                    color: '#FF0000'
                }
            ];
            
            // Obtenir une pi√®ce al√©atoire
            function getRandomPiece() {
                const piece = pieces[Math.floor(Math.random() * pieces.length)];
                return {
                    shape: piece.shape,
                    color: piece.color
                };
            }
            
            // Dessiner le plateau
            function drawBoard() {
                // Fond
                ctx.fillStyle = '#1A1A23';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Grille
                ctx.strokeStyle = '#2B2B36';
                ctx.lineWidth = 1;
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < cols; x++) {
                        ctx.strokeRect(x * blockSize, y * blockSize, blockSize, blockSize);
                    }
                }
                
                // Pi√®ces plac√©es
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < cols; x++) {
                        if (board[y][x]) {
                            drawBlock(x, y, board[y][x]);
                        }
                    }
                }
                
                // Pi√®ce courante
                if (currentPiece) {
                    currentPiece.shape.forEach((row, y) => {
                        row.forEach((value, x) => {
                            if (value) {
                                drawBlock(
                                    piecePos.x + x,
                                    piecePos.y + y,
                                    currentPiece.color
                                );
                            }
                        });
                    });
                }
            }
            
            // Dessiner un bloc
            function drawBlock(x, y, color) {
                ctx.fillStyle = color;
                ctx.fillRect(x * blockSize, y * blockSize, blockSize, blockSize);
                
                // Effet 3D
                ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                ctx.fillRect(x * blockSize, y * blockSize, blockSize, 3);
                ctx.fillRect(x * blockSize, y * blockSize, 3, blockSize);
                
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                ctx.fillRect(x * blockSize + 3, y * blockSize + blockSize - 3, blockSize - 3, 3);
                ctx.fillRect(x * blockSize + blockSize - 3, y * blockSize + 3, 3, blockSize - 6);
                
                // Bordure
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                ctx.strokeRect(x * blockSize, y * blockSize, blockSize, blockSize);
            }
            
            // Mettre √† jour l'affichage de la prochaine pi√®ce
            function updateNextPiece() {
                nextPieceEl.innerHTML = '';
                
                if (!nextPiece) return;
                
                const pieceDiv = document.createElement('div');
                pieceDiv.style.width = '120px';
                pieceDiv.style.height = '120px';
                pieceDiv.style.position = 'relative';
                
                nextPiece.shape.forEach((row, y) => {
                    row.forEach((value, x) => {
                        if (value) {
                            const block = document.createElement('div');
                            block.style.position = 'absolute';
                            block.style.left = `${x * 30}px`;
                            block.style.top = `${y * 30}px`;
                            block.style.width = '30px';
                            block.style.height = '30px';
                            block.style.backgroundColor = nextPiece.color;
                            block.style.borderRadius = '3px';
                            pieceDiv.appendChild(block);
                        }
                    });
                });
                
                nextPieceEl.appendChild(pieceDiv);
            }
            
            // V√©rifier les collisions
            function collision() {
                for (let y = 0; y < currentPiece.shape.length; y++) {
                    for (let x = 0; x < currentPiece.shape[y].length; x++) {
                        if (currentPiece.shape[y][x]) {
                            const boardX = piecePos.x + x;
                            const boardY = piecePos.y + y;
                            
                            if (
                                boardX < 0 ||
                                boardX >= cols ||
                                boardY >= rows ||
                                (boardY >= 0 && board[boardY][boardX])
                            ) {
                                return true;
                            }
                        }
                    }
                }
                return false;
            }
            
            // Rotation de la pi√®ce
            function rotatePiece() {
                if (isPaused || !gameStarted) return;
                
                const originalShape = currentPiece.shape;
                const rows = currentPiece.shape.length;
                const cols = currentPiece.shape[0].length;
                const newShape = Array(cols).fill().map(() => Array(rows).fill(0));
                
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < cols; x++) {
                        newShape[x][rows - 1 - y] = currentPiece.shape[y][x];
                    }
                }
                
                currentPiece.shape = newShape;
                
                if (collision()) {
                    currentPiece.shape = originalShape;
                }
            }
            
            // Fusionner la pi√®ce avec le plateau
            function merge() {
                currentPiece.shape.forEach((row, y) => {
                    row.forEach((value, x) => {
                        if (value) {
                            const boardY = piecePos.y + y;
                            const boardX = piecePos.x + x;
                            if (boardY >= 0) {
                                board[boardY][boardX] = currentPiece.color;
                            }
                        }
                    });
                });
            }
            
            // Supprimer les lignes compl√®tes
            function clearLines() {
                let linesCleared = 0;
                
                for (let y = rows - 1; y >= 0; y--) {
                    if (board[y].every(cell => cell !== 0)) {
                        board.splice(y, 1);
                        board.unshift(Array(cols).fill(0));
                        linesCleared++;
                        y++;
                    }
                }
                
                if (linesCleared > 0) {
                    // Calcul du score
                    const points = [0, 40, 100, 300, 1200][linesCleared] * level;
                    score += points;
                    lines += linesCleared;
                    
                    // Augmentation du niveau
                    level = Math.floor(lines / 10) + 1;
                    dropInterval = Math.max(100, 1000 - (level - 1) * 100);
                    
                    updateScore();
                }
            }
            
            // Mettre √† jour le score
            function updateScore() {
                scoreDisplay.textContent = score;
                levelDisplay.textContent = `Niveau: ${level}`;
            }
            
            // D√©placement de la pi√®ce
            function movePiece(dx, dy) {
                if (isPaused || !gameStarted) return false;
                
                piecePos.x += dx;
                piecePos.y += dy;
                
                if (collision()) {
                    piecePos.x -= dx;
                    piecePos.y -= dy;
                    
                    if (dy === 1) {
                        merge();
                        clearLines();
                        spawnPiece();
                    }
                    
                    return false;
                }
                
                return true;
            }
            
            // Faire appara√Ætre une nouvelle pi√®ce
            function spawnPiece() {
                currentPiece = nextPiece;
                nextPiece = getRandomPiece();
                piecePos.x = Math.floor(cols / 2) - Math.floor(currentPiece.shape[0].length / 2);
                piecePos.y = 0;
                
                // V√©rifier le game over
                if (collision()) {
                    gameOver = true;
                    finalScoreDisplay.textContent = `Score: ${score}`;
                    gameOverScreen.style.display = 'flex';
                }
                
                updateNextPiece();
            }
            
            // Tomber rapidement
            function hardDrop() {
                if (isPaused || !gameStarted) return;
                
                while (movePiece(0, 1)) {}
            }
            
            // Basculer pause
            function togglePause() {
                if (!gameStarted || gameOver) return;
                
                isPaused = !isPaused;
                pauseBtn.textContent = isPaused ? 'REPRENDRE' : 'PAUSE';
                
                if (!isPaused) {
                    lastTime = performance.now();
                    gameLoop();
                }
            }
            
            // Boucle de jeu principale
            function gameLoop(time = 0) {
                if (gameOver) return;
                if (isPaused) {
                    animationId = requestAnimationFrame(gameLoop);
                    return;
                }
                
                const deltaTime = time - lastTime;
                lastTime = time;
                
                dropCounter += deltaTime;
                if (dropCounter > dropInterval) {
                    movePiece(0, 1);
                    dropCounter = 0;
                }
                
                drawBoard();
                animationId = requestAnimationFrame(gameLoop);
            }
            
            // Gestion des touches
            document.addEventListener('keydown', e => {
                if (!gameStarted && e.key === 'Enter') {
                    startGame();
                    return;
                }
                
                if (gameOver && e.key === 'Enter') {
                    startGame();
                    return;
                }
                
                if (!gameStarted || gameOver) return;
                
                switch (e.key) {
                    case 'ArrowLeft':
                        movePiece(-1, 0);
                        break;
                    case 'ArrowRight':
                        movePiece(1, 0);
                        break;
                    case 'ArrowDown':
                        movePiece(0, 1);
                        dropCounter = 0;
                        break;
                    case 'ArrowUp':
                        rotatePiece();
                        break;
                    case ' ':
                        hardDrop();
                        break;
                    case 'p':
                    case 'P':
                        togglePause();
                        break;
                }
            });
            
            // D√©marrer une nouvelle partie
            function startGame() {
                board = Array(rows).fill().map(() => Array(cols).fill(0));
                score = 0;
                level = 1;
                lines = 0;
                dropInterval = 1000;
                dropCounter = 0;
                gameOver = false;
                isPaused = false;
                gameStarted = true;
                
                currentPiece = getRandomPiece();
                nextPiece = getRandomPiece();
                spawnPiece();
                
                updateScore();
                updateNextPiece();
                
                startScreen.style.display = 'none';
                gameOverScreen.style.display = 'none';
                
                lastTime = performance.now();
                if (animationId) cancelAnimationFrame(animationId);
                gameLoop();
            }
            
            // √âv√©nements des boutons
            startBtn.addEventListener('click', startGame);
            restartBtn.addEventListener('click', startGame);
            pauseBtn.addEventListener('click', togglePause);
            newGameBtn.addEventListener('click', startGame);
            
            // Dessiner l'√©cran de d√©marrage
            drawBoard();
        }

        // Jeu Banana Clicker
        function initBananaClicker() {
            // Variables du jeu
            let gameState = {
                bananas: 0,
                totalClicks: 0,
                bananasPerSecond: 0,
                multiplier: 1,
                goldenBananas: 0,
                diamondBananas: 0, // Nouveau type de monnaie premium
                upgrades: {},
                achievements: {}, // Suivi des succ√®s d√©bloqu√©s
                activeEvents: [], // √âv√©nements actifs
                stats: {
                    totalBananasEarned: 0,
                    totalPrestigesPerformed: 0,
                    bestBananaPerSecond: 0,
                    biggestCriticalClick: 0
                },
                lastUpdate: Date.now()
            };
            
            // Am√©liorations disponibles
            const upgrades = [
                { 
                    id: 'monkey', 
                    name: 'Singe Assistant', 
                    description: 'Un petit singe qui travaille pour vous', 
                    baseCost: 1500, 
                    bps: 0.2,
                    icon: 'fas fa-paw'
                },
                { 
                    id: 'farm', 
                    name: 'Ferme Banani√®re', 
                    description: 'Une plantation de bananes basique', 
                    baseCost: 1000, 
                    bps: 1,
                    icon: 'fas fa-tractor'
                },
                { 
                    id: 'factory', 
                    name: 'Usine de Bananes', 
                    description: 'Transforme les bananes en produits d√©riv√©s', 
                    baseCost: 5000, 
                    bps: 4,
                    icon: 'fas fa-industry'
                },
                { 
                    id: 'plantation', 
                    name: 'Plantation G√©ante', 
                    description: 'Dominez le march√© de la banane', 
                    baseCost: 30000, 
                    bps: 10,
                    icon: 'fas fa-globe-americas'
                },
                { 
                    id: 'research', 
                    name: 'Laboratoire de Recherche', 
                    description: 'Bananes g√©n√©tiquement modifi√©es', 
                    baseCost: 100000, 
                    bps: 25,
                    icon: 'fas fa-flask'
                },
                { 
                    id: 'portal', 
                    name: 'Portail Bananier', 
                    description: 'Importez des bananes d\'autres dimensions', 
                    baseCost: 500000, 
                    bps: 100,
                    icon: 'fas fa-door-open'
                },
                
                { 
                    id: 'timetravel', 
                    name: 'Machine √† Voyager dans le Temps', 
                    description: 'R√©cup√©rez des bananes du pass√© et du futur', 
                    baseCost: 1000000, 
                    bps: 400,
                    icon: 'fas fa-clock'
                },
                { 
                    id: 'galaxy', 
                    name: 'Data Center SQL', 
                    description: 'Gros lard va', 
                    baseCost: 10000000, 
                    bps: 1000,
                    icon: 'fas fa-star'
                },
                { 
                    id: 'chomeur', 
                    name: 'Chomeur de merde', 
                    description: 'La gros ta vraiment pas de vie', 
                    baseCost: 5000000000, 
                    bps: 100000,
                    icon: 'fas fa-door-open'
                },
            ];
            
            // Am√©liorations sp√©ciales
            const specialUpgrades = [
                {
                    id: 'multiplier',
                    name: 'Multiplicateur',
                    description: 'Augmente la valeur de chaque clic de 0.1x',
                    baseCost: 1000,
                    maxLevel: 10,
                    icon: 'fas fa-times-circle'
                },
                {
                    id: 'click-power',
                    name: 'Puissance de Clic',
                    description: 'Double occasionnellement les bananes gagn√©es par clic',
                    baseCost: 5000,
                    maxLevel: 5,
                    icon: 'fas fa-bolt'
                },
                {
                    id: 'auto-click',
                    name: 'Auto-Clicker',
                    description: 'Clique automatiquement toutes les 10 secondes',
                    baseCost: 15000,
                    maxLevel: 5,
                    icon: 'fas fa-mouse-pointer'
                },
                {
                    id: 'golden-chance',
                    name: 'Chance Dor√©e',
                    description: 'Augmente la chance d\'obtenir des bananes dor√©es en cliquant',
                    baseCost: 25000,
                    maxLevel: 5,
                    icon: 'fas fa-dice'
                }
            ];
            
            // √âv√©nements al√©atoires
            const randomEvents = [
                {
                    id: 'banana-rain',
                    name: 'Pluie de Bananes',
                    description: 'La production de bananes est doubl√©e pendant 30 secondes!',
                    duration: 30000,
                    effect: () => {
                        const oldBps = gameState.bananasPerSecond;
                        updateBananasPerSecond();
                        gameState.bananasPerSecond *= 2;
                        return () => {
                            gameState.bananasPerSecond = oldBps;
                            updateBananasPerSecond();
                        };
                    },
                    backgroundColor: 'rgba(255, 215, 0, 0.2)',
                    icon: 'fas fa-cloud-rain'
                },
                {
                    id: 'click-frenzy',
                    name: 'Fr√©n√©sie de Clics',
                    description: 'Les clics valent 3x plus pendant 20 secondes!',
                    duration: 20000,
                    effect: () => {
                        const oldMultiplier = gameState.multiplier;
                        gameState.multiplier *= 3;
                        return () => {
                            gameState.multiplier = oldMultiplier;
                        };
                    },
                    backgroundColor: 'rgba(255, 69, 0, 0.2)',
                    icon: 'fas fa-hand-pointer'
                },
                {
                    id: 'golden-rush',
                    name: 'Ru√©e vers l\'Or',
                    description: 'Chance de gagner des bananes dor√©es en cliquant!',
                    duration: 15000,
                    effect: () => {
                        // Logique g√©r√©e dans handleBananaClick
                        return () => {};
                    },
                    backgroundColor: 'rgba(218, 165, 32, 0.2)',
                    icon: 'fas fa-coins'
                }
            ];
            
            // Succ√®s √† d√©bloquer
            const achievements = [
                {
                    id: 'first-banana',
                    name: 'Premi√®re Banane',
                    description: 'Cliquez pour obtenir votre premi√®re banane',
                    condition: () => gameState.totalClicks >= 1,
                    reward: 'Une banane de bienvenue!',
                    icon: 'fas fa-hand-point-up'
                },
                {
                    id: 'banana-addict',
                    name: 'Accro aux Bananes',
                    description: 'Cliquez 100 fois',
                    condition: () => gameState.totalClicks >= 100,
                    reward: 'Augmentation de votre multiplicateur de 0.1x',
                    icon: 'fas fa-hand-rock',
                    effect: () => { gameState.multiplier += 0.1; }
                },
                {
                    id: 'banana-master',
                    name: 'Ma√Ætre des Bananes',
                    description: 'Cliquez 1,000 fois',
                    condition: () => gameState.totalClicks >= 1000,
                    reward: 'Augmentation de votre multiplicateur de 0.2x',
                    icon: 'fas fa-crown',
                    effect: () => { gameState.multiplier += 0.2; }
                },
                {
                    id: 'banana-king',
                    name: 'Roi des Bananes',
                    description: 'Atteignez 1 million de bananes',
                    condition: () => gameState.bananas >= 1000000,
                    reward: 'D√©bloquez le prestige!',
                    icon: 'fas fa-chess-king'
                },
                {
                    id: 'golden-collector',
                    name: 'Collectionneur Dor√©',
                    description: 'Obtenez 10 bananes dor√©es',
                    condition: () => gameState.goldenBananas >= 10,
                    reward: 'Augmentation du multiplicateur de prestige de 0.2x',
                    icon: 'fas fa-gem',
                    effect: () => { gameState.multiplier += 0.2; }
                },
                {
                    id: 'upgrade-enthusiast',
                    name: 'Passionn√© d\'Am√©liorations',
                    description: 'Achetez un total de 50 am√©liorations',
                    condition: () => {
                        let totalUpgrades = 0;
                        for (let id in gameState.upgrades) {
                            if (gameState.upgrades[id].owned) {
                                totalUpgrades += gameState.upgrades[id].owned;
                            }
                        }
                        return totalUpgrades >= 50;
                    },
                    reward: 'R√©duction de 5% sur tous les achats futurs',
                    icon: 'fas fa-arrow-circle-up',
                    effect: () => { gameState.discountMultiplier = 0.95; }
                }
            ];
            
            // √âl√©ments du DOM
            const bananaElement = document.getElementById('banana');
            const bananaCounter = document.getElementById('banana-counter');
            const bananaBps = document.getElementById('banana-bps');
            const totalClicksElement = document.getElementById('banana-total-clicks');
            const multiplierElement = document.getElementById('banana-multiplier');
            const goldenBananasElement = document.getElementById('banana-golden');
            const upgradesContainer = document.getElementById('banana-upgrades-container');
            const specialUpgradesContainer = document.getElementById('banana-special-upgrades-container');
            const prestigeBtn = document.getElementById('prestige-btn');
            const prestigeRequirement = document.getElementById('prestige-requirement');
            const prestigeReward = document.getElementById('prestige-reward');
            
            // Charger la sauvegarde
            function loadSave() {
                const save = localStorage.getItem('bananaClickerSave');
                if (save) {
                    const data = JSON.parse(save);
                    gameState = {
                        ...gameState,
                        ...data,
                        lastUpdate: Date.now()
                    };
                    
                    // Mise √† jour des BPS apr√®s chargement
                    updateBananasPerSecond();
                    updateDisplay();
                }
            }
            
            // Sauvegarder le jeu
            function saveGame() {
                localStorage.setItem('bananaClickerSave', JSON.stringify({
                    ...gameState,
                    lastUpdate: Date.now()
                }));
            }
            
            // Mettre √† jour l'affichage
            function updateDisplay() {
                bananaCounter.textContent = `${formatNumber(gameState.bananas)} bananes`;
                bananaBps.textContent = `${gameState.bananasPerSecond.toFixed(1)} bananes/seconde`;
                totalClicksElement.textContent = gameState.totalClicks;
                multiplierElement.textContent = `${gameState.multiplier.toFixed(1)}x`;
                goldenBananasElement.textContent = gameState.goldenBananas;
                
                // Mettre √† jour les boutons d'am√©lioration
                upgrades.forEach(upgrade => {
                    const btn = document.getElementById(`${upgrade.id}-btn`);
                    if (btn) {
                        const cost = getUpgradeCost(upgrade);
                        btn.disabled = gameState.bananas < cost;
                    }
                });
                
                // Mettre √† jour les boutons d'am√©liorations sp√©ciales
                specialUpgrades.forEach(upgrade => {
                    const btn = document.getElementById(`special-${upgrade.id}-btn`);
                    if (btn) {
                        const cost = getSpecialUpgradeCost(upgrade);
                        const level = gameState.upgrades[upgrade.id]?.level || 0;
                        btn.disabled = gameState.bananas < cost || level >= upgrade.maxLevel;
                        btn.textContent = level >= upgrade.maxLevel ? 'MAX' : `Am√©liorer (${formatNumber(cost)})`;
                    }
                });
                
                // Mettre √† jour le bouton de prestige
                const canPrestige = gameState.bananas >= 1000000;
                prestigeBtn.disabled = !canPrestige;
                prestigeRequirement.textContent = canPrestige 
                    ? 'Vous pouvez effectuer un prestige!' 
                    : 'Vous avez besoin d\'au moins 1,000,000 bananes pour effectuer un prestige.';
                
                const goldenBananasEarned = Math.floor(Math.sqrt(gameState.bananas / 1000000)); // Formule am√©lior√©e
                prestigeReward.textContent = `Vous obtiendrez ${goldenBananasEarned} Bananes Dor√©es`;
                
                // Mettre √† jour l'affichage des √©v√©nements actifs
                updateActiveEvents();
                
                // V√©rifier les succ√®s
                checkAchievements();
            }
            
            // Formater les grands nombres
            function formatNumber(num) {
                if (num >= 1000000000) {
                    return (num / 1000000000).toFixed(1) + 'B';
                }
                if (num >= 1000000) {
                    return (num / 1000000).toFixed(1) + 'M';
                }
                if (num >= 1000) {
                    return (num / 1000).toFixed(1) + 'K';
                }
                return Math.floor(num).toString();
            }
            
            // Calculer le co√ªt d'une am√©lioration
            function getUpgradeCost(upgrade) {
                const owned = gameState.upgrades[upgrade.id]?.owned || 0;
                let cost = Math.floor(upgrade.baseCost * Math.pow(1.15, owned));
                
                // Appliquer une r√©duction si le succ√®s correspondant est d√©bloqu√©
                if (gameState.discountMultiplier) {
                    cost = Math.floor(cost * gameState.discountMultiplier);
                }
                
                return cost;
            }
            
            // Calculer le co√ªt d'une am√©lioration sp√©ciale
            function getSpecialUpgradeCost(upgrade) {
                const level = gameState.upgrades[upgrade.id]?.level || 0;
                let cost = upgrade.baseCost * Math.pow(2, level);
                
                // Appliquer une r√©duction si le succ√®s correspondant est d√©bloqu√©
                if (gameState.discountMultiplier) {
                    cost = Math.floor(cost * gameState.discountMultiplier);
                }
                
                return cost;
            }
            
            // Mettre √† jour les bananes par seconde
            function updateBananasPerSecond() {
                let bps = upgrades.reduce((total, upgrade) => {
                    const owned = gameState.upgrades[upgrade.id]?.owned || 0;
                    return total + (upgrade.bps * owned);
                }, 0);
                
                // Bonus du prestige
                bps *= (1 + (gameState.goldenBananas * 0.1));
                
                gameState.bananasPerSecond = bps;
                
                // Mettre √† jour les statistiques
                if (bps > gameState.stats.bestBananaPerSecond) {
                    gameState.stats.bestBananaPerSecond = bps;
                }
            }
            
            // G√©rer le clic sur la banane
            function handleBananaClick() {
                let gain = gameState.multiplier;
                let isCritical = false;
                
                // Chance de coup critique
                const clickPowerLevel = gameState.upgrades['click-power']?.level || 0;
                if (clickPowerLevel > 0 && Math.random() < 0.1 * clickPowerLevel) {
                    gain *= 2;
                    isCritical = true;
                    
                    // Mettre √† jour les statistiques
                    if (gain > gameState.stats.biggestCriticalClick) {
                        gameState.stats.biggestCriticalClick = gain;
                    }
                    
                    // Effet sp√©cial
                    const clickEffect = document.createElement('div');
                    clickEffect.className = 'click-effect special';
                    clickEffect.textContent = `CRITIQUE! +${gain.toFixed(1)}`;
                    clickEffect.style.left = `${Math.random() * 100 + 50}px`;
                    clickEffect.style.color = 'gold';
                    document.getElementById('banana-container').appendChild(clickEffect);
                    
                    setTimeout(() => {
                        clickEffect.remove();
                    }, 2000);
                    
                    playSound(specialSound);
                } else {
                    // Effet normal
                    const clickEffect = document.createElement('div');
                    clickEffect.className = 'click-effect';
                    clickEffect.textContent = `+${gain.toFixed(1)}`;
                    clickEffect.style.left = `${Math.random() * 100 + 50}px`;
                    clickEffect.style.color = `hsl(${Math.random() * 60 + 30}, 100%, 50%)`;
                    document.getElementById('banana-container').appendChild(clickEffect);
                    
                    setTimeout(() => {
                        clickEffect.remove();
                    }, 1500);
                    
                    playSound(clickSound);
                }
                
                // V√©rifier si l'√©v√©nement "Ru√©e vers l'Or" est actif
                if (gameState.activeEvents.find(e => e.id === 'golden-rush') && Math.random() < 0.1) {
                    gameState.goldenBananas += 1;
                    
                    const goldEffect = document.createElement('div');
                    goldEffect.className = 'click-effect special';
                    goldEffect.textContent = '+1 üçå DOR√âE!';
                    goldEffect.style.left = `${Math.random() * 100 + 50}px`;
                    goldEffect.style.color = '#FFD700';
                    document.getElementById('banana-container').appendChild(goldEffect);
                    
                    setTimeout(() => {
                        goldEffect.remove();
                    }, 2500);
                    
                    playSound(specialSound);
                }
                
                // Chance de trouver une banane dor√©e bas√©e sur l'am√©lioration sp√©ciale
                const goldenChanceLevel = gameState.upgrades['golden-chance']?.level || 0;
                if (goldenChanceLevel > 0 && Math.random() < 0.005 * goldenChanceLevel) {
                    gameState.goldenBananas += 1;
                    
                    const goldEffect = document.createElement('div');
                    goldEffect.className = 'click-effect special';
                    goldEffect.textContent = '+1 üçå DOR√âE!';
                    goldEffect.style.left = `${Math.random() * 100 + 50}px`;
                    goldEffect.style.color = '#FFD700';
                    document.getElementById('banana-container').appendChild(goldEffect);
                    
                    setTimeout(() => {
                        goldEffect.remove();
                    }, 2500);
                    
                    playSound(specialSound);
                }
                
                // Animation de pulsation sur la banane
                bananaElement.style.transform = 'scale(0.92)';
                setTimeout(() => {
                    bananaElement.style.transform = 'scale(1)';
                }, 100);
                
                gameState.bananas += gain;
                gameState.totalClicks++;
                gameState.stats.totalBananasEarned += gain;
                
                updateDisplay();
                saveGame();
                
                // V√©rifier si un √©v√©nement al√©atoire doit appara√Ætre
                if (Math.random() < 0.005 && gameState.activeEvents.length === 0) {
                    triggerRandomEvent();
                }
            }
            
            // Acheter une am√©lioration
            function buyUpgrade(upgradeId) {
                const upgrade = upgrades.find(u => u.id === upgradeId);
                if (!upgrade) return;
                
                const cost = getUpgradeCost(upgrade);
                
                if (gameState.bananas >= cost) {
                    gameState.bananas -= cost;
                    
                    if (!gameState.upgrades[upgrade.id]) {
                        gameState.upgrades[upgrade.id] = { owned: 0 };
                    }
                    
                    gameState.upgrades[upgrade.id].owned++;
                    
                    updateBananasPerSecond();
                    updateDisplay();
                    saveGame();
                    playSound(upgradeSound);
                }
            }
            
            // Acheter une am√©lioration sp√©ciale
            function buySpecialUpgrade(upgradeId) {
                const upgrade = specialUpgrades.find(u => u.id === upgradeId);
                if (!upgrade) return;
                
                const cost = getSpecialUpgradeCost(upgrade);
                const level = gameState.upgrades[upgrade.id]?.level || 0;
                
                if (level >= upgrade.maxLevel) return;
                
                if (gameState.bananas >= cost) {
                    gameState.bananas -= cost;
                    
                    if (!gameState.upgrades[upgrade.id]) {
                        gameState.upgrades[upgrade.id] = { level: 0 };
                    }
                    
                    gameState.upgrades[upgrade.id].level++;
                    
                    // Appliquer l'effet de l'am√©lioration
                    if (upgradeId === 'multiplier') {
                        gameState.multiplier += 0.1;
                    }
                    
                    updateDisplay();
                    saveGame();
                    playSound(upgradeSound);
                }
            }
            
            // Effectuer un prestige
            function prestige() {
                if (gameState.bananas < 1000000) return;
                
                const goldenBananasEarned = Math.floor(Math.sqrt(gameState.bananas / 1000000));
                
                if (confirm(`Voulez-vous vraiment effectuer un prestige? Vous obtiendrez ${goldenBananasEarned} Bananes Dor√©es mais perdrez toutes vos bananes et am√©liorations.`)) {
                    gameState.goldenBananas += goldenBananasEarned;
                    gameState.bananas = 0;
                    gameState.totalClicks = 0;
                    gameState.bananasPerSecond = 0;
                    gameState.multiplier = 1 + (gameState.goldenBananas * 0.1); // Bonus de prestige
                    gameState.upgrades = {};
                    gameState.activeEvents = [];
                    
                    // Mettre √† jour les statistiques
                    gameState.stats.totalPrestigesPerformed++;
                    
                    updateBananasPerSecond();
                    updateDisplay();
                    saveGame();
                    playSound(prestigeSound);
                    
                    // Re-rendre les am√©liorations
                    renderUpgrades();
                    renderSpecialUpgrades();
                    
                    // Afficher un message de f√©licitations
                    showNotification(`Prestige r√©ussi! Vous avez gagn√© ${goldenBananasEarned} Bananes Dor√©es.`);
                }
            }
            
            // D√©clencher un √©v√©nement al√©atoire
            function triggerRandomEvent() {
                // S√©lectionner un √©v√©nement al√©atoire
                const event = randomEvents[Math.floor(Math.random() * randomEvents.length)];
                
                // Appliquer l'effet de l'√©v√©nement
                const cleanup = event.effect();
                
                // Ajouter l'√©v√©nement √† la liste des √©v√©nements actifs
                gameState.activeEvents.push({
                    id: event.id,
                    name: event.name,
                    description: event.description,
                    icon: event.icon,
                    backgroundColor: event.backgroundColor,
                    endTime: Date.now() + event.duration,
                    cleanup
                });
                
                // Mettre √† jour l'affichage des √©v√©nements
                updateActiveEvents();
                
                // Jouer un son
                playSound(specialSound);
                
                // Afficher une notification
                showNotification(`√âV√âNEMENT: ${event.name} - ${event.description}`);
                
                // Planifier la fin de l'√©v√©nement
                setTimeout(() => {
                    endEvent(event.id);
                }, event.duration);
            }
            
            // Mettre fin √† un √©v√©nement
            function endEvent(eventId) {
                const eventIndex = gameState.activeEvents.findIndex(e => e.id === eventId);
                if (eventIndex === -1) return;
                
                // Ex√©cuter la fonction de nettoyage
                gameState.activeEvents[eventIndex].cleanup();
                
                // Supprimer l'√©v√©nement de la liste
                gameState.activeEvents.splice(eventIndex, 1);
                
                // Mettre √† jour l'affichage
                updateActiveEvents();
                updateDisplay();
            }
            
            // Mettre √† jour l'affichage des √©v√©nements actifs
            function updateActiveEvents() {
                // Cr√©er ou obtenir le conteneur d'√©v√©nements
                let eventsContainer = document.getElementById('banana-events-container');
                if (!eventsContainer) {
                    eventsContainer = document.createElement('div');
                    eventsContainer.id = 'banana-events-container';
                    eventsContainer.className = 'banana-events';
                    document.getElementById('banana-container').after(eventsContainer);
                }
                
                // Vider le conteneur
                eventsContainer.innerHTML = '';
                
                // Si aucun √©v√©nement actif, cacher le conteneur
                if (gameState.activeEvents.length === 0) {
                    eventsContainer.style.display = 'none';
                    return;
                }
                
                // Afficher le conteneur
                eventsContainer.style.display = 'block';
                
                // Ajouter chaque √©v√©nement actif
                gameState.activeEvents.forEach(event => {
                    const eventElement = document.createElement('div');
                    eventElement.className = 'banana-event';
                    eventElement.style.backgroundColor = event.backgroundColor;
                    
                    // Calculer le temps restant
                    const remainingTime = Math.max(0, Math.floor((event.endTime - Date.now()) / 1000));
                    
                    eventElement.innerHTML = `
                        <div class="event-icon"><i class="${event.icon}"></i></div>
                        <div class="event-info">
                            <h4>${event.name}</h4>
                            <p>${event.description}</p>
                            <div class="event-timer">${remainingTime}s</div>
                        </div>
                    `;
                    
                    eventsContainer.appendChild(eventElement);
                });
            }
            
            // V√©rifier les succ√®s d√©bloqu√©s
            function checkAchievements() {
                achievements.forEach(achievement => {
                    // Si le succ√®s est d√©j√† d√©bloqu√©, passer
                    if (gameState.achievements[achievement.id]) return;
                    
                    // V√©rifier si la condition est remplie
                    if (achievement.condition()) {
                        // Marquer le succ√®s comme d√©bloqu√©
                        gameState.achievements[achievement.id] = {
                            unlocked: true,
                            date: Date.now()
                        };
                        
                        // Appliquer l'effet du succ√®s si d√©fini
                        if (achievement.effect) {
                            achievement.effect();
                        }
                        
                        // Montrer une notification
                        showAchievementNotification(achievement);
                        
                        // Mettre √† jour l'affichage
                        updateDisplay();
                        saveGame();
                    }
                });
            }
            
            // Afficher une notification de succ√®s
            function showAchievementNotification(achievement) {
                const notification = document.createElement('div');
                notification.className = 'achievement-notification';
                notification.innerHTML = `
                    <div class="achievement-icon"><i class="${achievement.icon}"></i></div>
                    <div class="achievement-info">
                        <h4>Succ√®s d√©bloqu√©: ${achievement.name}</h4>
                        <p>${achievement.description}</p>
                        <p class="achievement-reward">${achievement.reward}</p>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Animation d'entr√©e
                setTimeout(() => {
                    notification.style.transform = 'translateX(0)';
                    notification.style.opacity = '1';
                    playSound(specialSound);
                }, 100);
                
                // Supprimer apr√®s un d√©lai
                setTimeout(() => {
                    notification.style.transform = 'translateX(120%)';
                    notification.style.opacity = '0';
                    setTimeout(() => {
                        notification.remove();
                    }, 500);
                }, 5000);
            }
            
            // Afficher une notification g√©n√©rale
            function showNotification(message) {
                const notification = document.createElement('div');
                notification.className = 'game-notification';
                notification.textContent = message;
                
                document.body.appendChild(notification);
                
                // Animation d'entr√©e
                setTimeout(() => {
                    notification.style.transform = 'translateY(0)';
                    notification.style.opacity = '1';
                }, 100);
                
                // Supprimer apr√®s un d√©lai
                setTimeout(() => {
                    notification.style.transform = 'translateY(-100%)';
                    notification.style.opacity = '0';
                    setTimeout(() => {
                        notification.remove();
                    }, 500);
                }, 3000);
            }
            
            // Fonction d'auto-clic bas√©e sur l'am√©lioration
            function handleAutoClick() {
                const autoClickLevel = gameState.upgrades['auto-click']?.level || 0;
                if (autoClickLevel > 0) {
                    // Simuler un clic toutes les 10 secondes, moins 1 seconde par niveau
                    const clickInterval = Math.max(1000, 10000 - (autoClickLevel * 1000));
                    
                    setInterval(() => {
                        // Un clic automatique vaut 50% d'un clic normal
                        let gain = gameState.multiplier * 0.5;
                        gameState.bananas += gain;
                        gameState.stats.totalBananasEarned += gain;
                        
                        // Petit effet visuel
                        const clickEffect = document.createElement('div');
                        clickEffect.className = 'click-effect';
                        clickEffect.textContent = `AUTO +${gain.toFixed(1)}`;
                        clickEffect.style.left = `${Math.random() * 100 + 50}px`;
                        clickEffect.style.color = `hsl(200, 80%, 60%)`;
                        document.getElementById('banana-container').appendChild(clickEffect);
                        
                        setTimeout(() => {
                            clickEffect.remove();
                        }, 1500);
                        
                        updateDisplay();
                    }, clickInterval);
                }
            }
            
            // G√©n√©rer les cartes d'am√©lioration
            function renderUpgrades() {
                upgradesContainer.innerHTML = '';
                
                upgrades.forEach(upgrade => {
                    const owned = gameState.upgrades[upgrade.id]?.owned || 0;
                    const cost = getUpgradeCost(upgrade);
                    const canAfford = gameState.bananas >= cost;
                    
                    const upgradeElement = document.createElement('div');
                    upgradeElement.className = 'banana-upgrade';
                    upgradeElement.innerHTML = `
                        <h4 class="banana-upgrade-title"><i class="${upgrade.icon}"></i> ${upgrade.name}</h4>
                        <p class="banana-upgrade-desc">${upgrade.description}</p>
                        <div class="banana-upgrade-info">
                            <span class="banana-upgrade-cost">Co√ªt: ${formatNumber(cost)}</span>
                            <span class="banana-upgrade-owned">Poss√©d√©s: ${owned}</span>
                        </div>
                        <div class="banana-upgrade-info">
                            <span>Production: +${upgrade.bps}/s</span>
                            <span>Total: +${(upgrade.bps * owned).toFixed(1)}/s</span>
                        </div>
                        <button id="${upgrade.id}-btn" class="banana-btn ${canAfford ? 'can-afford' : ''}" onclick="buyBananaUpgrade('${upgrade.id}')" ${canAfford ? '' : 'disabled'}>
                            ${canAfford ? 'Acheter' : `Besoin de ${formatNumber(cost - gameState.bananas)} de plus`}
                        </button>
                    `;
                    
                    upgradesContainer.appendChild(upgradeElement);
                });
            }
            
            // G√©n√©rer les am√©liorations sp√©ciales
            function renderSpecialUpgrades() {
                specialUpgradesContainer.innerHTML = '';
                
                specialUpgrades.forEach(upgrade => {
                    const level = gameState.upgrades[upgrade.id]?.level || 0;
                    const cost = getSpecialUpgradeCost(upgrade);
                    const maxed = level >= upgrade.maxLevel;
                    const canAfford = gameState.bananas >= cost && !maxed;
                    
                    const upgradeElement = document.createElement('div');
                    upgradeElement.className = 'banana-upgrade';
                    upgradeElement.innerHTML = `
                        <h4 class="banana-upgrade-title"><i class="${upgrade.icon}"></i> ${upgrade.name} <small>Niv. ${level}/${upgrade.maxLevel}</small></h4>
                        <p class="banana-upgrade-desc">${upgrade.description}</p>
                        ${maxed ? `
                            <button class="banana-btn" disabled>MAX</button>
                        ` : `
                            <div class="banana-upgrade-info">
                                <span class="banana-upgrade-cost">Co√ªt: ${formatNumber(cost)}</span>
                            </div>
                            <button id="special-${upgrade.id}-btn" class="banana-btn ${canAfford ? 'can-afford' : ''}" onclick="buyBananaSpecialUpgrade('${upgrade.id}')" ${canAfford ? '' : 'disabled'}>
                                ${canAfford ? 'Am√©liorer' : `Besoin de ${formatNumber(cost - gameState.bananas)} de plus`}
                            </button>
                        `}
                    `;
                    
                    specialUpgradesContainer.appendChild(upgradeElement);
                });
            }
            
            // Rendre les succ√®s d√©bloqu√©s
            function renderAchievements() {
                // Cr√©er ou obtenir le conteneur d'onglets
                let achievementsTab = document.getElementById('banana-achievements-tab');
                if (!achievementsTab) {
                    achievementsTab = document.createElement('div');
                    achievementsTab.id = 'banana-achievements-tab';
                    achievementsTab.className = 'banana-tab-content';
                    document.getElementById('banana-clicker-game').appendChild(achievementsTab);
                    
                    // Ajouter un bouton dans la barre d'onglets
                    const tabButton = document.createElement('button');
                    tabButton.className = 'banana-tab-btn';
                    tabButton.onclick = function() { openBananaTab('achievements'); };
                    tabButton.innerHTML = '<i class="fas fa-trophy"></i> Succ√®s';
                    document.querySelector('.banana-tab-buttons').appendChild(tabButton);
                }
                
                achievementsTab.innerHTML = '<h3>Succ√®s d√©bloqu√©s</h3>';
                
                // Conteneur pour les succ√®s
                const achievementsContainer = document.createElement('div');
                achievementsContainer.className = 'banana-achievements';
                achievementsTab.appendChild(achievementsContainer);
                
                // Calculer le nombre de succ√®s d√©bloqu√©s
                const unlockedCount = Object.keys(gameState.achievements).length;
                const totalCount = achievements.length;
                
                // Ajouter un compteur de succ√®s
                const achievementCounter = document.createElement('div');
                achievementCounter.className = 'achievement-counter';
                achievementCounter.textContent = `${unlockedCount} / ${totalCount} succ√®s d√©bloqu√©s`;
                achievementsTab.insertBefore(achievementCounter, achievementsContainer);
                
                // Ajouter chaque succ√®s
                achievements.forEach(achievement => {
                    const isUnlocked = gameState.achievements[achievement.id];
                    
                    const achievementElement = document.createElement('div');
                    achievementElement.className = `banana-achievement ${isUnlocked ? 'unlocked' : 'locked'}`;
                    
                    if (isUnlocked) {
                        const date = new Date(gameState.achievements[achievement.id].date);
                        achievementElement.innerHTML = `
                            <div class="achievement-icon"><i class="${achievement.icon}"></i></div>
                            <div class="achievement-info">
                                <h4>${achievement.name}</h4>
                                <p>${achievement.description}</p>
                                <p class="achievement-reward">${achievement.reward}</p>
                                <p class="achievement-date">D√©bloqu√© le ${date.toLocaleDateString()}</p>
                            </div>
                        `;
                    } else {
                        achievementElement.innerHTML = `
                            <div class="achievement-icon"><i class="fas fa-question"></i></div>
                            <div class="achievement-info">
                                <h4>${achievement.name}</h4>
                                <p>${achievement.description}</p>
                            </div>
                        `;
                    }
                    
                    achievementsContainer.appendChild(achievementElement);
                });
            }
            
            // Ajouter un onglet de statistiques
            function renderStats() {
                // Cr√©er ou obtenir le conteneur d'onglets
                let statsTab = document.getElementById('banana-stats-tab');
                if (!statsTab) {
                    statsTab = document.createElement('div');
                    statsTab.id = 'banana-stats-tab';
                    statsTab.className = 'banana-tab-content';
                    document.getElementById('banana-clicker-game').appendChild(statsTab);
                    
                    // Ajouter un bouton dans la barre d'onglets
                    const tabButton = document.createElement('button');
                    tabButton.className = 'banana-tab-btn';
                    tabButton.onclick = function() { openBananaTab('stats'); };
                    tabButton.innerHTML = '<i class="fas fa-chart-bar"></i> Statistiques';
                    document.querySelector('.banana-tab-buttons').appendChild(tabButton);
                }
                
                statsTab.innerHTML = '<h3>Statistiques du jeu</h3>';
                
                // Conteneur pour les statistiques
                const statsContainer = document.createElement('div');
                statsContainer.className = 'banana-stats-container';
                
                statsContainer.innerHTML = `
                    <div class="stat-item">
                        <div class="stat-label">Total de bananes gagn√©es</div>
                        <div class="stat-value">${formatNumber(gameState.stats.totalBananasEarned)}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Total de clics</div>
                        <div class="stat-value">${gameState.totalClicks}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Total de prestiges</div>
                        <div class="stat-value">${gameState.stats.totalPrestigesPerformed}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Meilleure production/sec</div>
                        <div class="stat-value">${gameState.stats.bestBananaPerSecond.toFixed(1)}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Plus gros clic critique</div>
                        <div class="stat-value">${gameState.stats.biggestCriticalClick.toFixed(1)}</div>
                    </div>
                `;
                
                statsTab.appendChild(statsContainer);
            }
            
            // Boucle de jeu pour les gains passifs
            function gameLoop() {
                const now = Date.now();
                const deltaTime = (now - gameState.lastUpdate) / 1000; // en secondes
                gameState.lastUpdate = now;
                
                if (gameState.bananasPerSecond > 0) {
                    gameState.bananas += gameState.bananasPerSecond * deltaTime;
                    gameState.stats.totalBananasEarned += gameState.bananasPerSecond * deltaTime;
                    updateDisplay();
                }
                
                // Mettre √† jour les minuteurs d'√©v√©nements
                if (gameState.activeEvents.length > 0) {
                    updateActiveEvents();
                }
                
                // Sauvegarder p√©riodiquement
                if (now % 30000 < 100) { // ~toutes les 30 secondes
                    saveGame();
                }
                
                requestAnimationFrame(gameLoop);
            }
            
            // Jouer un son
            function playSound(sound) {
                sound.currentTime = 0;
                sound.play().catch(e => console.log("Le son n'a pas pu √™tre jou√©:", e));
            }
            
            // Exposer les fonctions au scope global
            window.buyBananaUpgrade = buyUpgrade;
            window.buyBananaSpecialUpgrade = buySpecialUpgrade;
            window.prestigeBananaClicker = prestige;
            window.openBananaTab = function(tabId) {
                document.querySelectorAll('#banana-clicker-game .banana-tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelectorAll('#banana-clicker-game .banana-tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                document.querySelector(`#banana-clicker-game .banana-tab-btn[onclick*="openBananaTab('${tabId}')"]`).classList.add('active');
                document.getElementById(`banana-${tabId}-tab`).classList.add('active');
            };
            
            // Initialiser le jeu
            loadSave();
            renderUpgrades();
            renderSpecialUpgrades();
            renderAchievements();
            renderStats();
            bananaElement.addEventListener('click', handleBananaClick);
            prestigeBtn.addEventListener('click', prestige);
            handleAutoClick();
            gameLoop();
            
            // V√©rifier le temps d'absence (gains hors ligne)
            const offlineTime = (Date.now() - gameState.lastUpdate) / 1000;
            if (offlineTime > 60 && gameState.bananasPerSecond > 0) {
                // Limiter les gains hors ligne √† 8 heures maximum
                const cappedTime = Math.min(offlineTime, 8 * 60 * 60);
                const offlineGains = gameState.bananasPerSecond * cappedTime * 0.5; // 50% d'efficacit√© hors ligne
                
                gameState.bananas += offlineGains;
                gameState.stats.totalBananasEarned += offlineGains;
                
                showNotification(`Bienvenue ! Vous avez gagn√© ${formatNumber(offlineGains)} bananes pendant votre absence.`);
            }
        }
    </script>
</body>
</html>